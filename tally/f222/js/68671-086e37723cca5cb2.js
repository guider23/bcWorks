try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b9954563-29ba-4dd9-9118-3f17489c14a4",e._sentryDebugIdIdentifier="sentry-dbid-b9954563-29ba-4dd9-9118-3f17489c14a4")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:so.tally.main-application":!0})}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[68671],{14821:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(6029),o=n(31659),i=n(29733),a=n(94145),u=a.Ay.div.withConfig({componentId:"sc-b17d0337-0"})(["display:flex;flex:1;justify-content:center;align-items:center;flex-direction:column;text-align:center;max-width:100%;margin:",";svg{color:",";margin-bottom:32px;}"],function(e){return e.theme.spacing.md},function(e){return e.theme.color.textGrayscale4}),l=a.Ay.div.withConfig({componentId:"sc-b17d0337-1"})(["font-weight:bold;margin-bottom:8px;"]),s=a.Ay.div.withConfig({componentId:"sc-b17d0337-2"})(["max-width:600px;font-size:14px;line-height:1.5;color:",";",""],function(e){return e.theme.color.textGrayscale3},function(e){return e.hasButton&&"\n    margin-bottom: 16px;\n  "});let c=function(e){var t=e.title,n=e.description,a=e.icon,c=e.button,d=(0,i.Bd)().t,f=null!=a?a:o.A;return(0,r.jsxs)(u,{"data-sentry-element":"Container","data-sentry-component":"Error","data-sentry-source-file":"index.tsx",children:[(0,r.jsx)(f,{size:56,"data-sentry-element":"Icon","data-sentry-source-file":"index.tsx"}),(0,r.jsx)(l,{"data-sentry-element":"Title","data-sentry-source-file":"index.tsx",children:null!=t?t:d("error.title")}),(0,r.jsx)(s,{hasButton:!!c,"data-sentry-element":"Description","data-sentry-source-file":"index.tsx",children:null!=n?n:d("error.description")}),c]})}},26785:(e,t,n)=>{"use strict";n.d(t,{f:()=>a,y:()=>i});var r=n(51220),o=n(68884),i=function(e){return new Promise(function(t){return setTimeout(t,e)})},a=function(){var e=(0,r._)(function(e){var t,n,r,a=arguments;return(0,o.YH)(this,function(o){switch(o.label){case 0:t=a.length>1&&void 0!==a[1]?a[1]:250,n=a.length>2&&void 0!==a[2]?a[2]:null,r=0,o.label=1;case 1:if(!(!e()&&(null===n||r<n)))return[3,3];return[4,i(t)];case 2:return o.sent(),r+=t,[3,1];case 3:return[2]}})});return function(t){return e.apply(this,arguments)}}()},40936:(e,t,n)=>{"use strict";n.d(t,{El:()=>v,PZ:()=>p,Ti:()=>d,Uc:()=>y,bI:()=>c,iN:()=>h,io:()=>s,lO:()=>f,vE:()=>l,w3:()=>m});var r=n(67143),o=n(83242),i=n(70376),a=n(25730),u={image:[{type:".jpg"},{type:".jpeg"},{type:".png"},{type:".gif"},{type:".svg"},{type:".heic"},{type:".webp"},{type:".bmp"},{type:".psd"}],application:[{type:".pdf"},{type:".doc"},{type:".docx"},{type:".xls"},{type:".xlsx"},{type:".ppt"},{type:".pptx"},{type:".zip"},{type:".rar"},{type:".json"},{type:".gzip"},{type:".odt"}],text:[{type:".txt"},{type:".csv",otherMimeTypes:["application"]},{type:".html"},{type:".xml"}],video:[{type:".mp4"},{type:".mov"},{type:".webm"}],audio:[{type:".mp3"},{type:".wav"},{type:".mp4"},{type:".m4a"}]},l=function(e){switch(e.split(".").pop()){case"png":return"image/png";case"jpg":case"jpeg":return"image/jpeg";case"gif":return"image/gif";case"svg":return"image/svg+xml";case"webp":return"image/webp";case"bmp":return"image/bmp";case"ico":return"image/x-icon"}return null},s=function(e){return[{label:e("label.image"),options:[{text:e("label.all-image-files"),value:"image/*"}].concat((0,o._)(u.image.map(function(e){var t=e.type;return{text:t,value:t}})))},{label:e("label.video"),options:[{text:e("label.all-video-files"),value:"video/*"}].concat((0,o._)(u.video.map(function(e){var t=e.type;return{text:t,value:t}})))},{label:e("label.audio"),options:[{text:e("label.all-audio-files"),value:"audio/*"}].concat((0,o._)(u.audio.map(function(e){var t=e.type;return{text:t,value:t}})))},{label:e("label.text"),options:u.text.map(function(e){var t=e.type;return{text:t,value:t}})},{label:e("label.application"),options:u.application.map(function(e){var t=e.type;return{text:t,value:t}})}]},c=function(e){if(!e)return[];var t=[];return Object.keys(e).forEach(function(n){var r=e[n];if(r.includes("*")&&1===r.length)return t.push("".concat(n));r.filter(function(e){return"*"!==e}).forEach(function(e){t.includes(e)||t.push(e)})}),t},d=function(e){var t={};return e.forEach(function(n,o){var i=Object.keys(u).filter(function(e){return u[e].map(function(e){return e.type}).includes(n)});if(n.includes("*")){var a=(0,r._)(n.split("/"),1)[0],l="".concat(a,"/*"),s=u[a].map(function(e){return e.type}),c=e.filter(function(e){return s.includes(e)});if(0===c.length){t[l]=["*"];return}var d=0;e.forEach(function(e,t){c.includes(e)&&t>d&&(d=t)}),o>d&&(t[l]=["*"]);return}i.forEach(function(e){var r,o="".concat(e,"/*");if(!(t[o]&&t[o].includes("*"))){var i=null==(r=u[e].find(function(e){return e.type===n}))?void 0:r.otherMimeTypes;i&&i.forEach(function(e){var r="".concat(e,"/*");t[r]?t[r].push(n):t[r]=[n]}),t[o]?t[o].push(n):t[o]=[n]}})}),t},f=function(e,t){if(!e||!t)return 0;var n=e;return"KB"===t?n*=1024:"MB"===t?n=1024*n*1024:"GB"===t&&(n=1024*n*1048576),n},p=function(e,t){if(!e||!t)return 0;var n=e;return"KB"===t?n/=1024:"MB"===t?n=n/1024/1024:"GB"===t&&(n=n/1024/1024/1024),n},m=f(a.A.get("file-upload.max-file-size"),a.A.get("file-upload.max-file-size-unit")),h=function(e,t){if(void 0===e||0===Object.keys(e).length)return"";var n=(0,i.Z0)(),r=[];Object.keys(e).forEach(function(a){var u=e[a],l=a.replace("/*","").trim();if(u.includes("*")&&1===u.length)return[i.TM.German].includes(n)?r.push(t("label.".concat(l))):r.push(t("label.".concat(l)).toLowerCase());r.push.apply(r,(0,o._)(u))});var a=r.filter(function(e,t){return r.indexOf(e)===t});return 1===a.length?t("form-builder.file-upload.accepted-file-types",{types:a[0]}):t("form-builder.file-upload.accepted-file-types",{types:a.join(", ")})},v=function(e,t,n,r){var o=a.A.get("file-upload.max-file-size"),i=a.A.get("file-upload.max-file-size-unit");return e&&t?r?t:f(t,null!=n?n:i)>m?o:t:r?void 0:o},y=function(e,t,n,r){var o=a.A.get("file-upload.max-file-size-unit");return e&&n&&t?r?n:"GB"===n?o:n:r?void 0:o}},46237:(e,t,n)=>{"use strict";n.d(t,{CL:()=>b,Kv:()=>h,Lu:()=>v,YS:()=>y,ak:()=>g,lA:()=>m});var r=n(70376),o=n(2185),i=n(13485),a=n(70594),u=n(91946),l=n(50382),s=n(36892),c=n(48668),d=n(99611),f=n.n(d),p=n(9155),m=function(e){if(void 0!==e&&null!==e){if("string"==typeof e){var t=(0,o.H)(e);return(0,i.f)(t)?t:void 0}return e}},h=function(e,t){var n=t.regexp,i=t.monthsShort,a=t.dayIndex,u=void 0===a?-1:a,l=t.monthIndex,s=void 0===l?-1:l,c=t.yearIndex,d=void 0===c?-1:c,m=t.monthNumberIndex,h=void 0===m?-1:m;try{var v=!0,y=!1,g=void 0;try{for(var b,x,w=f()(e,RegExp(n,"ig"))[Symbol.iterator]();!(v=(x=w.next()).done);v=!0){var k=x.value;if(k[d]&&k[u]&&(k[s]||k[h])){var _=k[h]?parseFloat(k[h])-1:i.indexOf(k[s]);_>=0&&_<=11&&(b=(0,o.H)("".concat((0,r.CF)(k[d],4,"0"),"-").concat((0,r.CF)(_+1,2,"0"),"-").concat((0,r.CF)(k[u],2,"0"))))}}}catch(e){y=!0,g=e}finally{try{v||null==w.return||w.return()}finally{if(y)throw g}}}catch(n){(0,p.Cp)(n,{extra:{date:e,payload:t}})}return b},v=function(e){var t=new Date,n=new Date(e);return t.getFullYear()===n.getFullYear()?(0,a.GP)(new Date(e),"MMM d"):(0,a.GP)(new Date(e),"MMM d, yyyy")},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Date,r=new Date(e);return n.getFullYear()===r.getFullYear()?t&&n.getDate()===r.getDate()&&n.getMonth()===r.getMonth()?(0,a.GP)(new Date(e),"hh:mm a"):(0,a.GP)(new Date(e),"MMM d, hh:mm a"):(0,a.GP)(new Date(e),"MMM d, yyyy hh:mm a")},g=function(e,t){var n=new Date,r=new Date(e),o=y(e);return 1>(0,u.o)(n,r)?o=t("label.just-now"):1>(0,l.c)(n,r)&&(o=t("label.time-ago",{period:(0,s.k)(n,r,{addSuffix:!1})})),o},b=function(e,t){var n=new Date,r=new Date(e),o="";return 1>(0,u.o)(n,r)?t("label.just-now").toLowerCase():1>(0,c.M)(n,r)?t("label.time-ago",{period:"".concat((0,u.o)(n,r),"m")}):1>(0,l.c)(n,r)?t("label.time-ago",{period:"".concat((0,c.M)(n,r),"h")}):4>(0,l.c)(n,r)?t("label.time-ago",{period:"".concat((0,l.c)(n,r),"d")}):v(e)}},46355:(e,t,n)=>{"use strict";n.d(t,{D:()=>r});var r={get:function(e){try{var t,n;return null==(n=window.localStorage)||null==(t=n.getItem)?void 0:t.call(n,e)}catch(e){return null}},set:function(e,t){try{var n,r;null==(r=window.localStorage)||null==(n=r.setItem)||n.call(r,e,t)}catch(e){return}},remove:function(e){try{var t,n;null==(n=window.localStorage)||null==(t=n.removeItem)||t.call(n,e)}catch(e){return}}}},65912:(e,t,n)=>{"use strict";n.d(t,{A:()=>eI});var r=n(51220),o=n(78191),i=n(99649),a=n(93096),u=n(67143),l=n(83242),s=n(68884),c=n(6029),d=n(63178),f=n(72142),p=n(70376),m=n(67985),h=n(41716),v=n(12364),y=n.n(v),g=n(83817),b=n.n(g),x=n(61740),w=n(80506),k=n(39477),_=n(58472),C=n(71024),S=n.n(C),T=n(55729),I=n(29733),j=n(94145),A=n(14821),M=n(50316),N=n(48585),E=n(46397),D=n(60441),F=n(88617),U=n(22964),P=n(27932),H=j.Ay.div.withConfig({componentId:"sc-55910b0e-0"})(["display:flex;background:",";direction:",";"," ",""],function(e){return e.theme.color.background},function(e){return e.theme.direction},function(e){return e.styles.transparentBackground&&"\n    background: transparent;\n  "},function(e){return e.styles.alignLeft&&"\n    overflow: hidden;\n  "}),O=j.Ay.main.withConfig({componentId:"sc-55910b0e-1"})(["display:flex;flex-direction:column;width:100%;height:auto;min-height:100vh;"," ",""],function(e){var t=e.styles;return(t.popup||t.embed&&t.dynamicHeight)&&"\n    height: auto;\n    min-height: auto;\n  "},function(e){var t=e.styles;return(t.popup||t.embed&&t.dynamicHeight)&&t.lastPageHeight&&"\n    min-height: ".concat(t.lastPageHeight,"px;\n  ")});let L=function(e){var t=e.metaData,n=e.integrations,r=e.styles,o=e.children;return(0,c.jsx)(T.Fragment,{children:(0,c.jsxs)(H,{className:"tally-app",styles:r,"data-sentry-element":"Container","data-sentry-source-file":"index.tsx",children:[(0,c.jsx)(P.A,{metaData:t,integrations:n,"data-sentry-element":"LayoutHead","data-sentry-source-file":"index.tsx"}),(0,c.jsx)(O,{styles:r,"data-sentry-element":"Content","data-sentry-source-file":"index.tsx",children:o})]})})};var B=n(25730),G=n(99864);let R=function(e,t){(0,T.useEffect)(function(){if(t.isCustomDomain&&document&&document.querySelectorAll){var e=document.querySelectorAll("form a");e&&0!==e.length&&e.forEach&&e.forEach(function(e){var t;e&&e.getAttribute&&0===(null!=(t=e.getAttribute("href"))?t:"").indexOf(window.location.origin)&&"_blank"===e.getAttribute("target")&&e.removeAttribute("target")})}},[e])};var Y=n(40188),Q=n(84580);let $=function(e){var t=(0,u._)((0,T.useState)(1),2),n=t[0],r=t[1],o=(0,T.useMemo)(function(){return(0,Q.TW)(e)},[n]);return(0,T.useEffect)(function(){var e=function(e){var t;(null==(t=e.key)?void 0:t.includes("FORM_SESSION_"))&&r(function(e){return e+1})};return window.addEventListener("storage",e),function(){window.removeEventListener("storage",e)}},[]),o};var z=n(45500),J=n(51032),q=n(36679),V="tally-page-transition",W=n(81278);let K=function(e,t,n){var r=(0,W.useRouter)(),o=(0,T.useCallback)(function(n){if(e&&e()){if(n.preventDefault)n.preventDefault(),n.returnValue="";else if(!confirm(t))throw"routeChangeStopped"}},n);(0,T.useEffect)(function(){var e,t;return null==(e=window)||e.addEventListener("beforeunload",o),null==r||null==(t=r.events)||t.on("routeChangeStart",o),function(){var e,t;null==(e=window)||e.removeEventListener("beforeunload",o),null==r||null==(t=r.events)||t.off("routeChangeStart",o)}},[o])};var Z=n(2919),X=0,ee=!1,et=function(){return!!(window&&window.fbq)},en=function(e){et()?e():++X<5?setTimeout(function(){en(e)},1e3*X+100):ee=!0},er=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};et()?fbq("trackCustom",e,t):ee||en(function(){er(e,t)})},eo=0,ei=!1,ea=function(){return!!(window&&window.gtag)},eu=function(e){ea()?e():++eo<5?setTimeout(function(){eu(e)},1e3*eo+100):ei=!0},el=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ea()?gtag("event",e,(0,a._)((0,i._)({},t),{non_interaction:!0})):ei||eu(function(){el(e,t)})},es=n(9155),ec=n(50499),ed=n(40936),ef=n(26785),ep=n(30279),em=n(86750),eh=n(80013),ev=n(73881),ey=n(98194),eg=n(91184),eb=n(91261),ex=S()(function(){return n.e(25884).then(n.bind(n,25884))},{loadableGenerated:{webpack:function(){return[25884]}},ssr:!0}),ew=S()(function(){return n.e(98733).then(n.bind(n,21114))},{loadableGenerated:{webpack:function(){return[21114]}},ssr:!1}),ek=!1,e_=!0,eC=!1,eS={},eT={};let eI=function(e){var t,n,v,g,C,S,P,H,O,W,X=e.formId,ee=e.workspaceId,en=e.name,eo=e.blocks,ei=e.isClosed,eu=e.isPreview,eI=e.settings,ej=e.metaData,eA=e.integrations,eM=e.styles,eN=e.subscriptionPlan,eE=e.hasError,eD=e.country,eF=(0,I.Bd)().t,eU=(0,j.DP)(),eP=(0,u._)((0,T.useState)(!1),2),eH=eP[0],eO=eP[1],eL=(0,u._)((0,T.useState)(),2),eB=eL[0],eG=eL[1],eR=(0,u._)((0,T.useState)(1),2),eY=eR[0],eQ=eR[1],e$=(0,u._)((0,T.useState)([1]),2),ez=e$[0],eJ=e$[1],eq=(0,u._)((0,T.useState)(!1),2),eV=eq[0],eW=eq[1],eK=(0,u._)((0,T.useState)({}),2),eZ=eK[0],eX=eK[1],e0=(0,u._)((0,T.useState)(ei),2),e1=e0[0],e2=e0[1],e4=(0,u._)((0,T.useState)({formName:en}),2),e3=e4[0],e9=e4[1],e6=(0,u._)((0,T.useState)(!1),2),e5=e6[0],e8=e6[1],e7=(0,T.useMemo)(function(){return(0,ep.Gf)((0,ep.Li)(eo))},[]),te=$(X),tt=(0,T.useMemo)(function(){return(0,Q.S5)(ee)},[]),tn=(0,Y.Ay)({mode:"respond",formId:X,blocks:eo,settings:eI,page:eY,pages:e7,pageHistory:ez,country:eD}),tr=tn.formData,to=tn.onChangeFormData,ti=(0,Q.pE)(eY,e7,eo,eI,tr,to),ta=ti.buttonLabel,tu=ti.canAutoJumpToNextPage,tl=ti.cover,ts=ti.coverSettings,tc=ti.isCustomThankYouPage,td=ti.isLastInputPage,tf=ti.logo,tp=ti.nextPage,tm=ti.pageBlocks,th=ti.pageFilledIn,tv=ti.pageQuestions,ty=ti.showBackButton,tg=ti.showMaliciousFormWarning,tb=ti.showSubmitButton,tx=(0,G.F)(),tw=tx.track,tk=tx.isStarted,t_=(0,z.A)((0,i._)({},tr,eZ),tm,tv,function(e){return tV(e)},function(){return tK()}),tC=t_.formErrors,tS=t_.isPaying,tT=t_.showPayDisclaimer,tI=t_.onSubmit,tj=t_.setFormErrors,tA=((0,T.useEffect)(function(){return function(){document.body.classList.remove(V)}},[]),(0,T.useEffect)(function(){setTimeout(function(){document.body.classList.remove(V)},50)},[eY]),function(){document.body.classList.add(V)});ej=(0,a._)((0,i._)({},ej),{isFormRespondPage:!0,isFormEmbedded:(0,ec.al)(),title:"undefined"!=typeof document&&document.title?document.title:ej.title||en||eF("title.form"),description:ej.description||(eM.removeBranding?"":eF("description.respond")),imageUrl:ej.imageUrl||tl||"",font:(null==eI||null==(P=eI.styles)?void 0:P.font)||void 0,language:null!=(H=null==eI?void 0:eI.language)?H:p.TM.English,doNotTrack:eu,faviconType:ej.faviconUrl?(0,ed.vE)(ej.faviconUrl):null}),eM.withMedia=!!tf||!!tl;var tM=!eH&&!eM.removeBranding,tN=null!=ta?ta:eF(td?"label.submit":"label.next"),tE=!!(null==eI?void 0:eI.isPasswordProtected),tD=(0,u._)((0,T.useState)(""),2),tF=tD[0],tU=tD[1],tP=function(){tw([{event:d.$x.PageView,sessionUuid:te,page:eY}]),(0,eg.N)(eg.v.TallyFormPageView,{formId:X,page:eY}),(0,ec.al)()&&(0,ec.$Y)({event:eg.v.TallyFormPageView,payload:{formId:X,page:eY}}),ea()&&el(eg.v.TallyFormPageView,{event_category:window.location.pathname,event_label:"Page ".concat(eY)}),et()&&er(eg.v.TallyFormPageView,{content_category:window.location.pathname,value:eY})},tH=function(e,t){var n=(0,Q.qU)(e,t,X,en,eo,tr);(0,eg.N)(eg.v.TallyFormSubmitted,n),(0,ec.al)()&&(0,ec.$Y)({event:eg.v.TallyFormSubmitted,payload:n}),ea()&&el(eg.v.TallyFormSubmitted,{event_category:window.location.pathname,event_label:en}),et()&&er(eg.v.TallyFormSubmitted,{content_category:window.location.pathname,content_name:en})},tO=function(e){var t=e7[e-1];if(t){var n=t.filter(function(e){return e.type===f._B.Captcha}).map(function(e){return e.groupUuid});if(0!==n.length){var r=!1,o=(0,i._)({},eZ),a=!0,u=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=s.value;o[d]&&((0,eg.N)(eg.v.CaptchaReset,{response:o[d].response}),delete o[d],r=!0)}}catch(e){u=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(u)throw l}}r&&eX(o)}}},tL=function(e){var t;e===tp&&tw([{event:d.$x.PageComplete,sessionUuid:te,page:eY}]),tA(),eQ(e),null==(t=window)||t.scrollTo(0,0)},tB=(0,q.A)(tr,eo,tu,th,function(){return tK()}),tG=tB.isAutoJumping,tR=tB.setIsAutoJumping,tY=tB.setLastChangedGroupUuid,tQ=function(){if(tG&&tR(!1),eH)return void eO(!1);var e=ez[ez.length-2];e&&(eJ(ez.slice(0,-1)),tL(e))},t$=function(e){var t=0,n=!0,r=!1,o=void 0;try{for(var i,a=e7[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;if(t++,u.find(function(t){return t.groupUuid===e})){var l=ez.indexOf(t);return -1!==l&&eJ(ez.slice(0,l+1)),tL(t),t}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return null},tz=(0,T.useCallback)((0,r._)(function(){var e;return(0,s.YH)(this,function(t){switch(t.label){case 0:if(eu||eC||b()(eS,eT))return[2];eC=!0,e=(0,i._)({},eS),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Z.Ay.post("/forms/".concat(X,"/respond"),{sessionUuid:te,respondentUuid:tt,responses:e,isCompleted:!1,password:tF})];case 2:case 3:return t.sent(),[3,4];case 4:for(var n in e_=!1,eC=!1,eT=(0,i._)({},e),e)delete eS[n];return Object.keys(eS).length>0&&tz(),[2]}})}),[X,te,tt,tF,eu]),tJ=(0,T.useMemo)(function(){return y()(tz,2e3)},[tz]),tq=(t=(0,r._)(function(){var e,t,n,r,o,i,a,u,l,c,d,f=arguments;return(0,s.YH)(this,function(s){switch(s.label){case 0:e=f.length>0&&void 0!==f[0]?f[0]:0,s.label=1;case 1:return s.trys.push([1,3,,6]),[4,Z.Ay.post("/forms/".concat(X,"/respond"),{sessionUuid:te,respondentUuid:tt,responses:tr,captchas:eZ,isCompleted:!0,password:tF})];case 2:return n=(t=s.sent().data).submissionId,r=t.respondentId,ek=!0,[2,{submissionId:n,respondentId:r}];case 3:if((null==(d=o=s.sent())||null==(a=d.response)||null==(i=a.data)?void 0:i.errorType)==="INVALID_CAPTCHA"||(null==d||null==(l=d.response)||null==(u=l.data)?void 0:u.errorType)==="FORM_UNIQUE_SUBMISSION_CONFLICT")return[2,{submissionId:void 0,respondentId:void 0,error:o}];if((null==d||null==(c=d.response)?void 0:c.status)===h.A.FORBIDDEN)return e2(!0),[2,{submissionId:void 0,respondentId:void 0,error:o}];if(e>=3)return[2,{submissionId:void 0,respondentId:void 0,error:o}];return[4,(0,ef.y)((e+1)*5e3)];case 4:return s.sent(),[4,tq(e+1)];case 5:return[2,s.sent()];case 6:return[2]}})}),function(){return t.apply(this,arguments)}),tV=(n=(0,r._)(function(e){return(0,s.YH)(this,function(t){for(var n in to(e),eS=(0,i._)({},eS,e),tz(),Object.keys(e))tw([{event:d.Ay.QuestionAnswer,sessionUuid:te,blockGroupUuid:n}]);return[2]})}),function(e){return n.apply(this,arguments)}),tW=(v=(0,r._)(function(){var e,t,n,r,u,c,d,f,m,h,v,y;return(0,s.YH)(this,function(s){switch(s.label){case 0:if(eu)return ek=!0,[2];if(eV)return[2];if(eW(!0),eG(void 0),!tJ)return[3,3];return[4,tJ.flush()];case 1:return s.sent(),[4,(0,ef.f)(function(){return!eC})];case 2:s.sent(),s.label=3;case 3:return[4,tq()];case 4:if(t=(e=s.sent()).submissionId,n=e.respondentId,r=e.error,e9(function(e){return(0,a._)((0,i._)({},e),{id:t,respondentId:n})}),r){if((null==r||null==(c=r.response)||null==(u=c.data)?void 0:u.errorType)==="INVALID_CAPTCHA")try{if(m=r.response.data.errors[0].field,h=t$(m),null!==h)return tj((0,o._)({},m,[p.g1.ShouldSolveCaptcha])),tO(h),eW(!1),[2]}catch(e){(0,es.Cp)(e)}if((null==r||null==(f=r.response)||null==(d=f.data)?void 0:d.errorType)==="FORM_UNIQUE_SUBMISSION_CONFLICT")return e8(!0),eW(!1),[2];return eG(r),(0,es.Cp)(r),(0,es.wd)("Form submit: error",{extra:{formId:X,sessionUuid:te,respondentUuid:tt,formData:JSON.stringify(null!=tr?tr:{}),isFormEmbedded:ej.isFormEmbedded}}),tQ(),eW(!1),[2]}if(!t||!n)return(0,es.wd)("Form submit: missing submissionId",{extra:{formId:X,sessionUuid:te,respondentUuid:tt,formData:JSON.stringify(null!=tr?tr:{}),isFormEmbedded:ej.isFormEmbedded}}),tQ(),eW(!1),[2];try{tH(t,n),(0,Q.No)(X),(0,Q.pk)(X),(0,ev.bR)(Object.keys(tr))}catch(e){(0,es.Cp)(e),(0,es.wd)("Form submit: post-submit action failed",{extra:{formId:X,sessionUuid:te,respondentUuid:tt,formData:JSON.stringify(null!=tr?tr:{}),isFormEmbedded:ej.isFormEmbedded}})}if(null==eI?void 0:eI.redirectOnCompletion)try{return v=(0,ey.te)(eI.redirectOnCompletion,eo,tr,{id:t,respondentId:n,formName:en}),(0,ec.al)()?window.top&&(window.top.location.href=v):window.location.href=v,[2]}catch(e){if(null===tp)return eM.lastPageHeight=Math.min(document.body.clientHeight,window.innerHeight),eO(!0),null==(y=window)||y.scrollTo(0,0),[2];eJ((0,l._)(ez).concat([tp])),tL(tp)}return eW(!1),[2]}})}),function(){return v.apply(this,arguments)}),tK=(g=(0,r._)(function(){var e;return(0,s.YH)(this,function(t){switch(t.label){case 0:if(tk||tw([{event:d.$x.FormStart,sessionUuid:te,page:eY}]),tw(Object.entries(tr).filter(function(e){var t=(0,u._)(e,2),n=t[0],r=t[1];return!(0,p.Im)(r)&&tv.some(function(e){return e.blockGroupUuid===n})}).map(function(e){var t=(0,u._)(e,1)[0];return{event:d.Ay.QuestionAnswer,sessionUuid:te,blockGroupUuid:t}})),!(!ek&&!eV&&td))return[3,2];return[4,tW()];case 1:if(t.sent(),(null==eI?void 0:eI.redirectOnCompletion)||!ek)return[2];t.label=2;case 2:if(null===tp)return eM.lastPageHeight=Math.min(document.body.clientHeight,window.innerHeight),eO(!0),null==(e=window)||e.scrollTo(0,0),[2];return eJ((0,l._)(ez).concat([tp])),tL(tp),[2]}})}),function(){return g.apply(this,arguments)});(0,T.useEffect)(function(){(0,eg.N)(eg.v.TallyFormLoaded,{formId:X}),tw([{event:d.$x.FormView,sessionUuid:te,page:eY}]),(0,ec.al)()&&(0,ec.$Y)({event:eg.v.TallyFormLoaded,payload:{formId:X}})},[]),(0,T.useEffect)(function(){var e;tP(),tw([{event:d.Ay.QuestionDropOff,sessionUuid:te,blockGroupUuid:null==(e=tv.find(function(e){return(0,p.Im)(tr[e.blockGroupUuid])}))?void 0:e.blockGroupUuid}]),Object.keys(eZ).length>0&&tO(eY),(!(0,ec.Fr)()&&!(0,ec.al)()||eM.popup||eM.embed&&1!==eY)&&(0,Q.it)()},[eY]),(0,J.A)({blocks:eo,pageBlocks:tm,formData:tr,formMetaData:e3}),R(eY,ej),K(function(){return!(0,ec.al)()&&!ek&&!e5&&Object.keys(tr).length>0},eF("form-respond.not-submitted-data-warning"),[tr,e5]);var tZ=(0,T.useCallback)((C=(0,r._)(function(e,t){var n;return(0,s.YH)(this,function(r){switch(r.label){case 0:if((0,p.Im)(t))return[2,!1];return[4,(0,eh.R)(tm)];case 1:if(n=r.sent(),(0,em.t)((0,o._)({},e,t),(0,em.N)(tm),n,tm)[e])return[2,!1];return[2,!0]}})}),function(e,t){return C.apply(this,arguments)}),[tm]);if(eE)return(0,c.jsx)(L,{metaData:ej,integrations:eA,styles:eM,children:(0,c.jsx)(A.A,{})});if(e5)return(0,c.jsx)(L,{metaData:ej,integrations:eA,styles:eM,children:(0,c.jsx)(A.A,{icon:x.A,title:eF("form-respond.unique-submission-conflict.title"),description:eF("form-respond.unique-submission-conflict.description")})});if(tE&&!tF)return(0,c.jsxs)(L,{metaData:ej,integrations:eA,styles:eM,children:[(0,c.jsx)(ex,{formId:X,onUnlock:function(e){return tU(e)}}),!eM.removeBranding&&(0,c.jsx)(eb.lC,{children:(0,c.jsx)(ew,{mode:"respond",styles:eM})})]});if(e1){var tX=(null==eI?void 0:eI.closeMessageTitle)||eF("form-respond.closed.title"),t0=(null==eI?void 0:eI.closeMessageDescription)||eF("form-respond.closed.description");return ej.title=tX,ej.description=t0,(0,c.jsx)(L,{metaData:ej,integrations:eA,styles:eM,children:(0,c.jsx)(A.A,{icon:w.A,title:tX,description:(null==eI?void 0:eI.closeMessageDescription)||eF("form-respond.closed.description")})})}return(0,c.jsxs)(L,{metaData:ej,integrations:eA,styles:eM,"data-sentry-element":"Layout","data-sentry-component":"FormRespond","data-sentry-source-file":"index.tsx",children:[(null==eI?void 0:eI.hasProgressBar)&&!eH&&!tc&&(0,c.jsx)(F.A,{currentPage:eY,currentPageBlocks:tm,pages:e7,formData:tr,blocks:eo,hasCover:void 0!==tl,popup:eM.popup,embed:eM.embed}),tl&&(0,c.jsx)(E.A,{cover:tl,settings:ts,styles:eM}),tf&&(0,c.jsx)(D.default,{logo:tf,withCover:!!tl,styles:eM}),(0,c.jsxs)(eb.UC,{className:"tally-page".concat(!eH?" tally-page-".concat(eY):"").concat(eH||tc?" tally-page-thank-you":""),styles:eM,page:eY,isDefaultThankYouPage:eH,isCustomThankYouPage:tc,hasProgressBar:null==eI?void 0:eI.hasProgressBar,"data-sentry-element":"Content","data-sentry-source-file":"index.tsx",children:[!eH&&ty&&(0,c.jsx)(eb.p6,{className:"tally-back-button",children:(0,c.jsxs)(m.$,{variant:"ghost",onClick:tQ,children:[(0,c.jsx)(m.$.Icon,{children:"rtl"===eU.direction?(0,c.jsx)(k.A,{}):(0,c.jsx)(_.A,{})}),(0,c.jsx)(m.$.Text,{children:eF("label.back")})]})}),eH?(0,c.jsx)(U.A,{mode:"respond",styles:eM}):(0,c.jsxs)("form",{onSubmit:function(e){tb||e.preventDefault()},children:[(0,c.jsx)("progress",{max:e7.length,value:eY,children:eF("form-respond.progress",{page:eY,pages:e7.length})}),eB&&(0,c.jsx)(M.A,{exception:eB}),(0,c.jsx)(N.A,{blocks:eo,pageBlocks:tm,formData:tr,errors:tC,mode:"respond",formId:X,workspaceId:ee,subscriptionPlan:eN,hasPartialSubmissions:null!=(O=null==eI?void 0:eI.hasPartialSubmissions)&&O,language:null!=(W=null==eI?void 0:eI.language)?W:p.TM.English,styles:eM,respondentUuid:tt,sessionUuid:te,onChange:function(e,t){tG||(tY(e),to((0,o._)({},e,t)),tZ(e,t).then(function(n){if(tw([{event:d.$x.FormStart,sessionUuid:te,page:eY}]),n){var r,u=(0,a._)((0,i._)({},tr),(0,o._)({},e,t)),l=(0,Q.pE)(eY,e7,eo,eI,u,function(){}).pageQuestions;tw([{event:d.Ay.QuestionAnswer,sessionUuid:te,blockGroupUuid:e},{event:d.Ay.QuestionDropOff,sessionUuid:te,blockGroupUuid:null==(r=l.find(function(e){return(0,p.Im)(u[e.blockGroupUuid])}))?void 0:r.blockGroupUuid}])}else tw([{event:d.Ay.QuestionDropOff,sessionUuid:te,blockGroupUuid:e}])}))},onSaveResponse:(S=(0,r._)(function(e){var t;return(0,s.YH)(this,function(n){return tG||((0,p.gf)(eN)&&(null==eI?void 0:eI.hasPartialSubmissions)?(t=(0,Q.sJ)((0,i._)({},tr,e),ez,e7,eo),eS=e_?(0,i._)({},eS,tr,t,e):(0,i._)({},eS,t,e)):eS=(0,i._)({},eS,e),tJ()),[2]})}),function(e){return S.apply(this,arguments)}),onSolveCaptcha:function(e){eX((0,i._)({},eZ,e))}}),tb&&(0,c.jsxs)(T.Fragment,{children:[(0,c.jsxs)(eb.Xn,{className:"tally-submit-button",children:[(0,c.jsx)("div",{children:(0,c.jsxs)(m.$,{type:"submit",size:"lg",isLoading:eV||tG||tS,onClick:tI,tabIndex:0,children:[(0,c.jsx)(m.$.Text,{children:tN}),(0,c.jsx)(m.$.Icon,{children:"rtl"===eU.direction?(0,c.jsx)(_.A,{}):(0,c.jsx)(k.A,{})})]})}),tM&&(0,c.jsx)("div",{children:(0,c.jsx)(ew,{mode:"respond",styles:eM})})]}),tT&&(0,c.jsx)(eb.MW,{dangerouslySetInnerHTML:{__html:eF("form-respond.pay-disclaimer",{buttonText:(0,p.QZ)(tN)})}}),tg&&(0,c.jsx)(eb.MW,{dangerouslySetInnerHTML:{__html:eF("form-respond.password-warning",{reportUrl:B.A.get("help-links.report-abuse")})}})]})]}),tM&&tc&&(0,c.jsx)(eb.lC,{children:(0,c.jsx)(ew,{mode:"respond",styles:eM,isOnThankYouPage:!0,isOnCustomThankYouPage:!0})})]})]})}},66944:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(99649),o=n(6029),i=n(55729),a=n(94145).Ay.textarea.withConfig({componentId:"sc-325428e2-0"})(["width:100%;max-width:100%;resize:vertical;min-height:96px;padding:","px ","px;color:",";caret-color:",";background-color:",";box-shadow:",";border:0;border-radius:","px;outline:none;@media (hover:hover){&:hover{box-shadow:",";}}&:focus{box-shadow:",";}&::placeholder{color:",";}"],function(e){var t=e.theme;return(t.form.inputHeight-t.form.baseFontSize)/2},function(e){return e.theme.form.inputHorizontalPadding},function(e){return e.theme.color.text},function(e){return e.theme.color.text},function(e){return e.theme.color.inputBackground},function(e){return e.theme.color.inputBoxShadow},function(e){return e.theme.form.inputBorderRadius},function(e){return e.theme.color.inputBoxShadowHover},function(e){return e.theme.color.inputBoxShadowFocus},function(e){return e.theme.color.inputPlaceholder}),u=(0,i.forwardRef)(function(e,t){return(0,o.jsx)(a,(0,r._)({ref:t},e))});u.displayName="Textarea";let l=u},73881:(e,t,n)=>{"use strict";n.d(t,{QJ:()=>a,bR:()=>u,yH:()=>i});var r=n(46355),o="PHONE_NUMBER_INPUT",i=function(e,t,n){try{var i={},a=r.D.get(o);a&&(i=JSON.parse(a)),i.keys||(i.keys={}),i.lastCountryCode=n||i.lastCountryCode||null,t||n?i.keys[e]={value:t,countryCode:n}:delete i.keys[e],localStorage.setItem(o,JSON.stringify(i))}catch(e){}},a=function(e,t,n){try{var i={},a=r.D.get(o);if(a){if(i=JSON.parse(a),!t&&!n&&i.lastCountryCode)return i.lastCountryCode;if(i.keys&&i.keys[e]&&t===i.keys[e].value&&i.keys[e].countryCode)return i.keys[e].countryCode}}catch(e){}return null},u=function(e){try{var t=r.D.get(o);if(!t)return;var n=JSON.parse(t);if(!n.keys)return;var i=!1,a=!0,u=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=s.value;n.keys[d]&&(delete n.keys[d],i=!0)}}catch(e){u=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(u)throw l}}0===Object.keys(n.keys).length&&(delete n.keys,i=!0),i&&localStorage.setItem(o,JSON.stringify(n))}catch(e){}}},86973:()=>{},98194:(e,t,n)=>{"use strict";n.d(t,{Fw:()=>b,HF:()=>k,KB:()=>w,PL:()=>h,Ql:()=>x,UF:()=>p,Xq:()=>g,_R:()=>_,c2:()=>m,p9:()=>v,te:()=>y});var r=n(67143),o=n(72142),i=n(70376),a=n(36102),u=n.n(a),l=n(36002),s=n(70259),c=n(50499),d=n(97279),f=n(84580),p=function(e){var t=document.createElement("textarea");return t.textContent=e,t.innerHTML},m=function(e){var t=[];return e&&e.forEach&&0!==e.length&&e.forEach(function(e){if(e.nodeType===Node.TEXT_NODE&&e.textContent)t.push([p(e.textContent)]);else if(e.nodeType===Node.ELEMENT_NODE&&(e.childNodes.length>0||"BR"===e.nodeName)&&"SCRIPT"!==e.nodeName){var n,r,o,i,a,u=[];switch(e.nodeName){case"B":u.push(["font-weight","bold"]);break;case"U":u.push(["text-decoration","underline"]);break;case"I":u.push(["font-style","italic"]);break;case"A":var l=e.href;((null==l?void 0:l.match(/^http(s)?:\/\//))||(null==l?void 0:l.match(/^mailto:/))||(null==l?void 0:l.match(/^tel:/))||(null==l?void 0:l.match(/^sms:/)))&&u.push(["href",l]);break;case"FONT":var s=e.color;(null==s?void 0:s.match(/#[0-9a-fA-F]{3,6}/))&&u.push(["color",s]);break;case"DIV":u.push(["tag","div"]);break;case"P":u.push(["tag","p"]);break;case"BR":u.push(["tag","br"]);break;case"SPAN":u.push(["tag","span"])}var c=e.style;if(((null==c||null==(n=c.color)?void 0:n.match(/#[0-9a-fA-F]{3,6}/))||(null==c||null==(r=c.color)?void 0:r.match(/rgb\([0-9]{1,3}, [0-9]{1,3}, [0-9]{1,3}\)/))||(null==c?void 0:c.color)==="inherit")&&u.push(["color",c.color]),((null==c||null==(o=c.backgroundColor)?void 0:o.match(/#[0-9a-fA-F]{3,6}/))||(null==c||null==(i=c.backgroundColor)?void 0:i.match(/rgb\([0-9]{1,3}, [0-9]{1,3}, [0-9]{1,3}\)/))||(null==c?void 0:c.backgroundColor)==="inherit")&&u.push(["background-color",c.backgroundColor]),null==c?void 0:c.fontWeight){var d=null==c?void 0:c.fontWeight;["bolder","lighter"].includes(d)&&(d="bold"),u.push(["font-weight",d])}(null==c?void 0:c.fontStyle)&&u.push(["font-style",c.fontStyle]),(null==c?void 0:c.textDecoration)&&u.push(["text-decoration",c.textDecoration]),(null==c?void 0:c.display)&&u.push(["display",c.display]),"SPAN"===e.nodeName&&(null==(a=e.className)?void 0:a.indexOf("mention"))!==-1&&u.push(["mention",e.dataset.uuid]),u.length>0&&(1===e.childNodes.length&&e.childNodes[0].nodeType===Node.TEXT_NODE&&e.childNodes[0].textContent?t.push([p(e.childNodes[0].textContent),u]):"BR"===e.nodeName?t.push(["",u]):t.push([m(e.childNodes),u]))}}),t},h=function(e,t,n){return e.length&&t.length?e.map(function(e){var o=(0,r._)(e,2),i=o[0],a=o[1],u=!1,l=null==a?void 0:a.filter(function(e){var o=(0,r._)(e,2),i=o[0],a=o[1];if("mention"===i){var l=t.find(function(e){return e.uuid===a});if(!l||!n.find(function(e){return e.uuid===l.field.uuid}))return u=!0,!1}return!0});if(u)return["",l];if("string"==typeof i){var s=null==a?void 0:a.find(function(e){return"mention"===(0,r._)(e,1)[0]});if(s){var c=s[1],d=t.find(function(e){return e.uuid===c}),f=n.find(function(e){return e.uuid===(null==d?void 0:d.field.uuid)});if(d&&f&&d.field.title!==f.title)return[i.replace("@".concat(d.field.title),"@".concat(f.title)),l]}}return["string"==typeof i?i:h(i,t,n),l]}):e},v=function(e){var t=document.createElement("div");return t.innerHTML=e,(0,o.cD)(m(t.childNodes))},y=function(e,t,n,r){if("undefined"==typeof document)return"";var a=(0,o.cD)(e.safeHTMLSchema);a=a.replace(/\u200B/g,"");var u=document.createElement("div");u.innerHTML=a;var l=!0,c=!1,d=void 0;try{for(var p,m=e.mentions[Symbol.iterator]();!(l=(p=m.next()).done);l=!0)!function(){var e,a,l,c=p.value,d=c.uuid,m=c.field,h=c.defaultValue,v=u.querySelectorAll('[data-uuid="'.concat(d,'"]'));if(0!==v.length){var y=m.uuid,g=m.type,b=m.questionType,x=m.blockGroupUuid,w=m.calculatedFieldType,k="";g===o.PU.Metadata?k=r[y]:g===o.PU.InputField&&b&&x?k=b===o._B.InputDate?null!=(e=n[x])?e:"":(0,f.S4)(b,n[x],t):[o.PU.CalculatedField,o.PU.HiddenField].includes(g)&&y&&x&&(k=(null==(a=n[x])?void 0:a[y])?n[x][y]:""),g===o.PU.CalculatedField&&w===o.ZH.Number&&"number"==typeof k&&(k=(0,i.U7)(k,2)),m.questionType===o._B.Matrix&&(k=(null!=(l=n[m.blockGroupUuid][m.uuid])?l:[]).map(function(e){return(0,s.Q)(e,t)}).join(",")),(u.textContent.startsWith("http")||u.textContent.startsWith("www."))&&("string"!=typeof k||-1===k.indexOf("/"))&&(k=encodeURIComponent(k)),v.forEach(function(e){e.innerHTML=(null==k?void 0:k.toString())||h||""})}}()}catch(e){c=!0,d=e}finally{try{l||null==m.return||m.return()}finally{if(c)throw d}}return(0,i.Pl)(u.textContent,!0)},g=function(e){return!(e&&Array.isArray(null==e?void 0:e.safeHTMLSchema))||0===(0,i.QZ)((0,o.cD)(e.safeHTMLSchema)).length},b=function(){var e=document.createElement("div");return e.innerHTML="Tally Forms",{safeHTMLSchema:m(e.childNodes),mentions:[]}},x=function(e){var t=C("Form name",(0,d.ww)(e,{includeMetadata:!0}).find(function(e){return"formName"===e.uuid})),n=t.mentionObj,r=t.mentionHtml,o=document.createElement("div");return o.innerHTML="New Tally Form Submission for ".concat(r),{safeHTMLSchema:m(o.childNodes),mentions:[n]}},w=function(){var e=C("All answers",(0,d.NT)()),t=e.mentionObj,n=e.mentionHtml,r=document.createElement("div");return r.innerHTML=n,{safeHTMLSchema:m(r.childNodes),mentions:[t]}},k=function(e){var t=[],n="",r=C("Form name",(0,d.ww)(e,{includeMetadata:!0,includePlaceholders:!0}).find(function(e){return"formName"===e.uuid})),o=r.mentionObj,i=r.mentionHtml;n+="<div>New submission for *".concat(i,"*.</div><br/>"),t.push(o);var a=C("All answers",(0,d.NT)()),u=a.mentionObj,l=a.mentionHtml;n+="<div>".concat(l,"</div>"),t.push(u);var s=document.createElement("div");return s.innerHTML=n,{safeHTMLSchema:m(s.childNodes),mentions:t}},_=function(e){var t=C(e.title,e),n=t.mentionObj,r=t.mentionHtml,o=document.createElement("div");return o.innerHTML=r,{safeHTMLSchema:m(o.childNodes),mentions:[n]}},C=function(e,t){var n=(0,l.A)();return{mentionObj:{uuid:n,field:t},mentionHtml:'<span class="mention" contenteditable="false" data-uuid="'.concat(n,'">@').concat(u().encode(e),"</span>").concat((0,c.nr)()?"â€‹":"")}}}}]);