try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d426d88f-4139-4b0e-a58c-bedd3dbcbf13",e._sentryDebugIdIdentifier="sentry-dbid-d426d88f-4139-4b0e-a58c-bedd3dbcbf13")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:so.tally.main-application":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[83225],{3656:(e,t,n)=>{n.d(t,{Fx:()=>s,S_:()=>m,c5:()=>p,fJ:()=>y,jT:()=>f});var r=n(99649),i=n(93096),u=n(72142),o=n(70376),l=n(34804),a=n.n(l),d=n(7244),c=n(75345),p=function(e){var t=[],n=[],o=[],l=[];return e.forEach(function(a,p){if(a.groupType===u._B.Matrix&&e.filter(function(e){return e.groupUuid===a.groupUuid&&e.type===u._B.MatrixRow}).length>0){if(n.includes(a.groupUuid))return;n.push(a.groupUuid);var f=p+1,s=e.filter(function(e){return e.groupUuid===a.groupUuid&&e.type===u._B.MatrixColumn}).map(function(e){return{uuid:e.uuid,type:d.o.Block,block:e,index:f++}}),y=e.filter(function(e){return e.groupUuid===a.groupUuid&&e.type===u._B.MatrixRow}).map(function(e){return{uuid:e.uuid,type:d.o.Block,block:e,index:f++}});t.push({uuid:a.groupUuid,type:d.o.Matrix,table:{uuid:a.uuid,type:d.o.Block,block:(0,i._)((0,r._)({},a),{payload:(0,i._)((0,r._)({},a.payload),{html:""})}),index:p},columns:s,rows:y});return}if(!a.payload.columnListUuid)return void t.push({uuid:a.uuid,type:d.o.Block,block:a,index:p});if(!o.includes(a.payload.columnListUuid)){o.push(a.payload.columnListUuid);var v=e.filter(function(e){return e.payload.columnListUuid===a.payload.columnListUuid}),g={uuid:a.payload.columnListUuid,type:d.o.ColumnList,columns:[]};v.forEach(function(e,t){if(!l.includes(e.payload.columnUuid)){l.push(e.payload.columnUuid);var n={uuid:e.payload.columnUuid,type:d.o.Column,ratio:e.payload.columnRatio,blocks:[]};n.blocks=v.filter(function(e){return e.payload.columnUuid===n.uuid}).map(function(e,n){return{uuid:e.uuid,type:d.o.Block,block:e,index:p+t+n}}),n.firstBlock=n.blocks[0],n.lastBlock=n.blocks[n.blocks.length-1],g.columns.push(n)}}),(0,c.Ry)(g.columns.map(function(e){return e.ratio}))&&(g.columns=g.columns.map(function(e){return(0,i._)((0,r._)({},e),{flex:1})})),g.firstColumn=g.columns[0],g.lastColumn=g.columns[g.columns.length-1],t.push(g)}}),t},f=function(e,t,n){if(!1===u.QD.includes(e.type))return null;var r,i,l,a,d=e.uuid,c=e.type,p=e.groupUuid,f=e.groupType,s=e.payload,y=(0,u.RX)(e)?e.value:void 0,m=null!=(l=u.Ot[c])?l:c,h=null,T=null,_=null,b=null,x=!0,U=!1,E=null!=(a=null==n||null==(r=n.get(p))?void 0:r.start)?a:t.findIndex(function(e){return e.uuid===d}),B=null==(i=t[E])?void 0:i.uuid;if(!1===u.Nj.includes(c)){if(u.Oo.includes(c)&&(y||s.placeholder)?(_=(0,o.QZ)(null!=y?y:s.placeholder),b=d):c===u._B.Signature&&s.label?(_=(0,o.QZ)(s.label),b=d):c===u._B.DropdownOption&&s.placeholder&&(_=(0,o.QZ)(s.placeholder),b=d),null===h){var k=v(E,p,t);h=k.title,T=k.titleBlockUuid,U=k.isFolded,null!==T&&(E=k.titleIndex,B=T)}null===h&&null!==_&&(h=_,T=b),s.name&&(h=s.name)}null!==h&&(x=!1);var C=d;if(f===u._B.Matrix){var N=t.find(function(e){return e.groupUuid===p&&e.type===u._B.MatrixColumn&&!0===e.payload.isLast});N&&(C=N.uuid)}var O=g(E,e,t,n),A=O.endBlockUuid,I=O.canBeFolded,S=O.numberOfBlocks;return{type:m,blockGroupUuid:p,title:h||u.pr[m],titleBlockUuid:T,isRequired:s.isRequired,isRequiredBlockUuid:C,isRequiredGroupBlockUuid:p,isUntitled:x,isFolded:U,canBeFolded:I,startBlockUuid:B,endBlockUuid:A,numberOfBlocks:S}},s=function(e){var t=[],n=new Map,r=h(e);return e.forEach(function(i){!1!==u.QD.includes(i.type)&&(t.includes(i.groupUuid)||(n.set(i.groupUuid,f(i,e,r)),t.push(i.groupUuid)))}),n},y=function(e){var t=new Map,n=new Map,r=h(e);return e.forEach(function(i){if(!1!==u.QD.includes(i.type)){var o=t.get(i.groupUuid);if(o)return void n.set(i.uuid,o);var l=f(i,e,r);l.titleBlockUuid&&n.set(l.titleBlockUuid,l),n.set(i.uuid,l),t.set(i.groupUuid,l)}}),n},v=function(e,t,n){if(!n[--e])return{title:null,titleBlockUuid:null,isFolded:!1,titleIndex:-1};var r,i,l=n[e],a=(0,u.RX)(l)?l.value:void 0;return l.groupUuid!==t&&(u.Wx.includes(l.type)||u.Og.includes(l.groupType)||l.type===u._B.PageBreak||l.type===u._B.Divider)?{title:null,titleBlockUuid:null,isFolded:!1,titleIndex:-1}:u.FN.includes(l.type)?{title:(0,o.QZ)(null!=(r=null!=a?a:l.payload.html)?r:""),titleBlockUuid:l.uuid,isFolded:null!=(i=l.payload.isFolded)&&i,titleIndex:e}:v(e,t,n)},g=function(e,t,n,r){var i,o,l,d,c=null!=(l=null==r||null==(i=r.get(t.groupUuid))?void 0:i.end)?l:a()(n,function(e){return e.groupUuid===t.groupUuid}),p=null!=(d=null==(o=n[c])?void 0:o.uuid)?d:t.uuid,f=c-e+1,s=u.bV.includes(t.groupType);if(!s)return{endBlockUuid:p,canBeFolded:s,numberOfBlocks:f};for(var y=e+1;y<=c;y++){var v=n[y];if(v&&v.groupUuid!==t.groupUuid&&(u.Wx.includes(v.type)||u._B.PageBreak===v.type)){s=!1;break}}return{endBlockUuid:p,canBeFolded:s,numberOfBlocks:f}},m=function(e,t){if(t[++e]){var n=t[e];if(!u.FN.includes(n.type)&&n.type!==u._B.PageBreak&&n.type!==u._B.Divider)return u.Dw.includes(n.type)?n.groupUuid:m(e,t)}},h=function(e){var t=new Map;return e.forEach(function(e,n){var r=e.groupUuid,i=t.get(r);i?t.set(r,{start:i.start,end:n}):t.set(r,{start:n,end:n})}),t}},7244:(e,t,n)=>{n.d(t,{o:()=>r});var r=function(e){return e.Block="BLOCK",e.ColumnList="COLUMN_LIST",e.Column="COLUMN",e.Matrix="MATRIX",e}({})},13527:(e,t,n)=>{n.d(t,{O:()=>u});var r=n(79405),i=n(5869),u=function(e){return"string"==typeof e&&(0,r.A)(e)&&4===(0,i.A)(e)}},30279:(e,t,n)=>{n.d(t,{Gf:()=>m,Li:()=>g,ko:()=>h,mG:()=>T});var r=n(99649),i=n(93096),u=n(83242),o=n(72142),l=n(70376),a=n(36102),d=n.n(a),c=n(96104),p=n.n(c),f=n(59018),s=n.n(f),y=n(70259),v=n(47504),g=function(e){var t=[],n=[];return e.forEach(function(u){var l,a,c=u.type,p=u.groupUuid,f=u.groupType;o.Bs.includes(c)?(n.push(p),t.push((0,i._)((0,r._)({},u),{payload:(0,i._)((0,r._)({},u.payload),{html:(0,o.cD)(u.payload.safeHTMLSchema,{inRespondMode:!0})})}))):f===o._B.Dropdown||f===o._B.MultiSelect?!1===n.includes(p)&&(n.push(p),t.push((0,i._)((0,r._)({},u),{uuid:u.groupUuid,type:u.groupType,payload:(0,i._)((0,r._)({},u.payload),{placeholder:u.payload.placeholder?d().decode(u.payload.placeholder):null,options:e.filter(function(e){return e.groupUuid===p}).map(function(e){var t,n,r;return{value:e.uuid,text:e.payload.text?d().decode(e.payload.text):"",image:null!=(t=e.payload.image)?t:null,color:null!=(n=e.payload.color)?n:(0,v.lJ)(e.payload.index),isOtherOption:null!=(r=e.payload.isOtherOption)&&r}})})}))):([o._B.MultipleChoice,o._B.Checkboxes,o._B.Ranking].includes(f)?(null==u||null==(l=u.payload)?void 0:l.text)&&(u.payload.text=d().decode(u.payload.text)):(null==u||null==(a=u.payload)?void 0:a.placeholder)&&(u.payload.placeholder=d().decode(u.payload.placeholder)),n.push(p),t.push(u))}),t},m=function(e){var t=[],n=[];return e.forEach(function(e){e.type!==o._B.PageBreak?n.push(e):(t.push(n),n=[])}),n.length>0&&t.push(n),t},h=function(e){var t=s()(e.filter(function(e){var t=e.groupType,n=e.payload,r=e.type;return n.randomize&&o.Og.includes(t)||n.randomizeRows&&r===o._B.MatrixRow}).map(function(e){return e.groupUuid})),n=(0,u._)(e);return t.forEach(function(t){var u=[],l=[];if(e.forEach(function(e,n){e.groupUuid===t&&e.type!==o._B.Matrix&&e.type!==o._B.MatrixColumn&&(u.push(e),l.push(n))}),0!==u.length){var a=[],d=(0,y.b)(u);if(d.length>0){var c=[],f=[];u.forEach(function(e,t){d.includes(e.uuid)&&(c.push(e),f.push(t))}),u=u.filter(function(e){return!d.includes(e.uuid)}),a=p()(u),f.forEach(function(e,t){a.splice(e,0,c[t])})}else a=p()(u);l.forEach(function(e,t){var u=n[e].payload,o=u.columnUuid,d=u.columnListUuid,c=u.columnRatio;n[e]=(0,i._)((0,r._)({},a[t]),{payload:(0,i._)((0,r._)({},a[t].payload),{index:t,isFirst:0===t,isLast:t===l.length-1})}),o&&(n[e].payload.columnUuid=o,n[e].payload.columnListUuid=d,n[e].payload.columnRatio=c)})}}),n},T=function(e,t){var n=s()(e.filter(function(e){return e.groupType===o._B.Ranking}).map(function(e){return e.groupUuid}));if(0===n.length)return e;var a=(0,u._)(e);return n.forEach(function(n){if(!(0,l.Im)(t[n])){var u=[],o=[];e.forEach(function(e,t){e.groupUuid===n&&(u.push(e),o.push(t))}),o.forEach(function(e,l){var d=void 0,c=t[n][l];if(void 0!==c&&(d=u.find(function(e){return e.uuid===c}),u=u.filter(function(e){return e.uuid!==c})),d||(d=u.shift()),d){var p=a[e].payload,f=p.columnListUuid,s=p.columnUuid,y=p.columnRatio;a[e]=(0,i._)((0,r._)({},d),{payload:(0,i._)((0,r._)({},d.payload),{index:l,isFirst:0===l,isLast:l===o.length-1})}),s&&(a[e].payload.columnUuid=s,a[e].payload.columnListUuid=f,a[e].payload.columnRatio=y)}})}}),a}},36526:(e,t,n)=>{n.d(t,{$E:()=>y,AX:()=>p,NP:()=>c,V:()=>a,Vz:()=>d,bE:()=>s,x2:()=>f});var r=n(72142),i=n(29452),u=n.n(i),o=n(75729),l=n(89498),a=function(e,t){return!!t&&!!t.isRequired&&(null==t?void 0:t.isRequired)&&(t.titleBlockUuid===e||!t.titleBlockUuid&&t.isRequiredBlockUuid===e)},d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=[],i=!1,u=!0,o=!1,l=void 0;try{for(var a,d=e[Symbol.iterator]();!(u=(a=d.next()).done);u=!0){var c=a.value;if(i||c.uuid===t)i=!0;else{r.push(c);continue}if(i&&n.includes(c.type)){r.push(c);continue}}}catch(e){o=!0,l=e}finally{try{u||null==d.return||d.return()}finally{if(o)throw l}}return r},c=function(e,t){if(!r.l.includes(e.type))return!1;var n=t.find(function(t){return t.groupUuid===e.blockGroupUuid});return!n||n.type!==r._B.MultipleChoiceOption&&n.type!==r._B.Dropdown||!n.payload.allowMultiple},p=function(e,t){return s(e)||r._B.Matrix===e.type||(null==t?void 0:t.includeQuestions)&&r.FN.includes(e.type)},f=function(e,t,n){var r=[];return p(e,n)&&(r=u()((0,l.WY)(t.startBlockUuid)+1,(0,l.WY)(t.endBlockUuid)+1)),r},s=function(e){return e.payload.isFolded&&r.FN.includes(e.type)},y=function(e,t){return r.gt.includes(e)&&[o.X2.CreateColumnList,o.X2.CreateColumn,o.X2.AddToColumn].includes(t)}},47504:(e,t,n)=>{n.d(t,{BQ:()=>o,KV:()=>m,RY:()=>l,fj:()=>s,fu:()=>c,lF:()=>p,lJ:()=>g,nx:()=>a,v:()=>d,x2:()=>y,xv:()=>f,zs:()=>v});var r=n(54791),i=n(66170),u={},o={red:r.Tj.redDark2,orange:r.Tj.orangeDark2,yellow:r.Tj.yellowDark2,green:r.Tj.greenDark2,blue:r.Tj.blueDark2,purple:r.Tj.purpleDark2,pink:r.Tj.pinkDark2,gray:r.Tj.text},l={gray:r.Tj.grayBackground,red:r.Tj.redLight2,orange:r.Tj.orangeLight2,yellow:r.Tj.yellowLight1,green:r.Tj.greenLight2,blue:r.Tj.blueLight2,purple:r.Tj.purpleLight2,pink:r.Tj.pinkLight2},a={gray:r.Tj.grayBackground,red:r.Tj.redLight1,orange:r.Tj.orangeLight1,yellow:r.Tj.yellowLight1,green:r.Tj.greenLight1,blue:r.Tj.blueLight1,purple:r.Tj.purpleLight1,pink:r.Tj.pinkLight1},d={gray:r.Tj.grayNeutral,red:r.Tj.redNeutral,orange:r.Tj.orangeNeutral,yellow:r.Tj.yellowDark1,green:r.Tj.greenNeutral,blue:r.Tj.blueNeutral,purple:r.Tj.purpleNeutral,pink:r.Tj.pinkNeutral},c=function(e,t){var n="".concat(e,"_").concat(t);if(u[n])return u[n];var r=(0,i.A)(e).setAlpha(t).toRgbString();return u[n]=r,r},p=function(e){return"".concat((0,i.A)(e).setAlpha(.12).toRgbString(),"  0px 1px 1px 0px, ").concat((0,i.A)(e).setAlpha(.16).toRgbString()," 0px 0px 0px 1px, ").concat((0,i.A)(e).setAlpha(.08).toRgbString()," 0px 2px 5px 0px")},f=function(e){return"".concat((0,i.A)(e).setAlpha(.12).toRgbString()," 0px 1px 1px 0px, ").concat((0,i.A)(e).setAlpha(.16).toRgbString()," 0px 0px 0px 1px,").concat((0,i.A)(e).setAlpha(.08).toRgbString()," 0px 3px 9px 0px, ").concat((0,i.A)(e).setAlpha(.08).toRgbString()," 0px 2px 5px 0px")},s=function(e){return"".concat(e," 0px 0px 0px 2px, ").concat((0,i.A)(e).setAlpha(.16).toRgbString()," 0px 0px 0px 1px")},y=function(e){return"".concat((0,i.A)(e).setAlpha(.36).toRgbString()," 0px 0px 0px 4px, ").concat((0,i.A)(e).setAlpha(.16).toRgbString()," 0px 0px 0px 1px")},v=function(e){return"".concat((0,i.A)(e).setAlpha(.36).toRgbString()," 0px 0px 0px 4px, ").concat(e," 0px 0px 0px 2px")},g=function(e){var t=Object.keys(o);return t[e%t.length]},m=function(e,t){return!!e&&!!t&&(0,i.A)(e).toHex()===(0,i.A)(t).toHex()}},70259:(e,t,n)=>{n.d(t,{Q:()=>l,b:()=>a});var r=n(72142),i=n(70376),u=n(36102),o=n.n(u),l=function(e,t){var n=t.find(function(t){return t.uuid===e});return n?(0,r.RX)(n)?o().decode((0,i.QZ)(n.value)):(0,i.QZ)((0,r.cD)(n.payload.safeHTMLSchema)):""},a=function(e){if(!e||0===e.length)return[];var t,n=e[0].payload;if(!n.randomize)return[];var r=null!=(t=n.lockInPlace)?t:[],i=[];return e.forEach(function(e){r.includes(e.uuid)?i.push(e.uuid):e.payload.isOtherOption&&i.push(e.uuid)}),i}},72142:(e,t,n)=>{n.d(t,{eR:()=>eb,Ot:()=>eU,_Y:()=>ei,_B:()=>d,ZH:()=>h,JI:()=>k,Fi:()=>U,yh:()=>E,IO:()=>x,RZ:()=>B,oT:()=>N,HB:()=>eE,Oo:()=>eB,Mn:()=>ek,NV:()=>eN,pr:()=>eO,fg:()=>S,Wx:()=>eI,PU:()=>R,zI:()=>eS,Og:()=>eM,bV:()=>eR,Dw:()=>eA,xZ:()=>ew,fL:()=>eF,cb:()=>eD,c:()=>eL,$y:()=>eP,IG:()=>eq,s_:()=>eY,MZ:()=>eW,gt:()=>eX,gV:()=>eQ,IA:()=>eK,_i:()=>eH,Nj:()=>eG,P_:()=>ej,l:()=>eJ,QD:()=>eV,FN:()=>eC,Bs:()=>eZ,WW:()=>e1,mu:()=>ez,vj:()=>e$,Yr:()=>e0,HT:()=>e2,H_:()=>w,K0:()=>F,Km:()=>e9,YP:()=>e7,sL:()=>e3,DL:()=>T,wW:()=>_,bp:()=>b,CA:()=>C,tP:()=>O,pk:()=>A,aB:()=>I,Do:()=>M,dt:()=>D,Xe:()=>H,RX:()=>G,Wy:()=>c,qz:()=>j,bt:()=>q,TW:()=>Y,yC:()=>W,ej:()=>X,im:()=>Q,il:()=>K,L7:()=>V,fN:()=>J,HE:()=>Z,Mm:()=>z,Dm:()=>$,L3:()=>ee,dW:()=>et,lB:()=>en,c1:()=>er,gR:()=>eu,qL:()=>eo,u9:()=>el,vv:()=>ea,Ns:()=>ed,En:()=>ec,A2:()=>ep,zS:()=>ef,mO:()=>es,MU:()=>ey,hc:()=>L,VX:()=>ev,pX:()=>P,cD:()=>e8});var r,i,u,o,l,a=n(99490),d=function(e){return e.FormTitle="FORM_TITLE",e.Text="TEXT",e.Label="LABEL",e.Title="TITLE",e.Heading1="HEADING_1",e.Heading2="HEADING_2",e.Heading3="HEADING_3",e.Divider="DIVIDER",e.PageBreak="PAGE_BREAK",e.ThankYouPage="THANK_YOU_PAGE",e.Image="IMAGE",e.Embed="EMBED",e.EmbedVideo="EMBED_VIDEO",e.EmbedAudio="EMBED_AUDIO",e.Question="QUESTION",e.MultipleChoice="MULTIPLE_CHOICE",e.Checkboxes="CHECKBOXES",e.Dropdown="DROPDOWN",e.Ranking="RANKING",e.Matrix="MATRIX",e.MultiSelect="MULTI_SELECT",e.InputText="INPUT_TEXT",e.InputNumber="INPUT_NUMBER",e.InputEmail="INPUT_EMAIL",e.InputLink="INPUT_LINK",e.InputPhoneNumber="INPUT_PHONE_NUMBER",e.InputDate="INPUT_DATE",e.InputTime="INPUT_TIME",e.Textarea="TEXTAREA",e.FileUpload="FILE_UPLOAD",e.LinearScale="LINEAR_SCALE",e.Rating="RATING",e.HiddenFields="HIDDEN_FIELDS",e.MultipleChoiceOption="MULTIPLE_CHOICE_OPTION",e.Checkbox="CHECKBOX",e.DropdownOption="DROPDOWN_OPTION",e.RankingOption="RANKING_OPTION",e.MultiSelectOption="MULTI_SELECT_OPTION",e.Payment="PAYMENT",e.Signature="SIGNATURE",e.MatrixRow="MATRIX_ROW",e.MatrixColumn="MATRIX_COLUMN",e.WalletConnect="WALLET_CONNECT",e.ConditionalLogic="CONDITIONAL_LOGIC",e.CalculatedFields="CALCULATED_FIELDS",e.Captcha="CAPTCHA",e.RespondentCountry="RESPONDENT_COUNTRY",e}({});function c(e){return e.type===d.FormTitle}var p=n(79205),f=n(27220),s=n(10650),y=n(15903),v=n(22318),g=n.n(v),m=((0,y._)(Error),n(83242)),h=function(e){return e.Number="NUMBER",e.Text="TEXT",e}({});function T(e){return e.type===d.CalculatedFields}function _(e){return e.type===d.Captcha}function b(e){return e.type===d.Checkbox}var x=function(e){return e.And="AND",e.Or="OR",e}({}),U=function(e){return e.Addition="ADDITION",e.Subtraction="SUBTRACTION",e.Multiplication="MULTIPLICATION",e.Division="DIVISION",e.Assignment="ASSIGNMENT",e}({}),E=function(e){return e.Is="IS",e.IsNot="IS_NOT",e.IsAnyOf="IS_ANY_OF",e.IsEveryOf="IS_EVERY_OF",e.Contains="CONTAINS",e.DoesNotContain="DOES_NOT_CONTAIN",e.StartsWith="STARTS_WITH",e.DoesNotStartWith="DOES_NOT_START_WITH",e.EndsWith="ENDS_WITH",e.DoesNotEndWith="DOES_NOT_END_WITH",e.IsEmpty="IS_EMPTY",e.IsNotEmpty="IS_NOT_EMPTY",e.Equal="EQUAL",e.NotEqual="NOT_EQUAL",e.GreaterThan="GREATER_THAN",e.LessThan="LESS_THAN",e.GreaterOrEqualThan="GREATER_OR_EQUAL_THAN",e.LessOrEqualThan="LESS_OR_EQUAL_THAN",e.IsBefore="IS_BEFORE",e.IsAfter="IS_AFTER",e}({}),B=function(e){return e.Single="SINGLE",e.Group="GROUP",e}({}),k=function(e){return e.JumpToPage="JUMP_TO_PAGE",e.Calculate="CALCULATE",e.RequireAnswer="REQUIRE_ANSWER",e.ShowBlocks="SHOW_BLOCKS",e.HideBlocks="HIDE_BLOCKS",e.HideButtonToDisableCompletion="HIDE_BUTTON_TO_DISABLE_COMPLETION",e}({});function C(e){return e.type===d.ConditionalLogic}var N=function(e){return e.InThePast="IN_THE_PAST",e.InTheFuture="IN_THE_FUTURE",e.Mondays="MONDAYS",e.Tuesdays="TUESDAYS",e.Wednesdays="WEDNESDAYS",e.Thursdays="THURSDAYS",e.Fridays="FRIDAYS",e.Saturdays="SATURDAYS",e.Sundays="SUNDAYS",e}({});function O(e){return e.type===d.Divider}function A(e){return e.type===d.Dropdown}function I(e){return e.type===d.DropdownOption}var S=function(e){return e.Link="LINK",e.Upload="UPLOAD",e}({});function M(e){return[d.Embed,d.EmbedAudio,d.EmbedVideo].includes(e.type)}var R=function(e){return e.Placeholder="PLACEHOLDER",e.Utility="UTILITY",e.Metadata="METADATA",e.InputField="INPUT_FIELD",e.HiddenField="HIDDEN_FIELD",e.CalculatedField="CALCULATED_FIELD",e}({}),w=function(e){return e.Date="DATE",e}({}),F=function(e){return e.Today="utility::today()",e}({}),D=function(e){return Object.values(R).includes(null==e?void 0:e.type)},L=function(e){return D(e)&&(null==e?void 0:e.type)==="UTILITY"},P=function(e){if(e===d.InputDate)return"DATE"};function H(e){return e.type===d.FileUpload}var G=function(e){return Object.keys(e).includes("value")};function j(e){return[d.Heading1,d.Heading2,d.Heading3].includes(e.type)}function q(e){return e.type===d.HiddenFields}function Y(e){return e.type===d.Image}function W(e){return e.type===d.InputDate}function X(e){return e.type===d.InputEmail}function Q(e){return e.type===d.InputLink}function K(e){return e.type===d.InputNumber}function V(e){return e.type===d.InputPhoneNumber}function J(e){return e.type===d.InputText}function Z(e){return e.type===d.InputTime}function z(e){return e.type===d.Label}function $(e){return e.type===d.LinearScale}function ee(e){return e.type===d.Matrix}function et(e){return[d.MatrixColumn,d.MatrixRow].includes(e.type)}function en(e){return e.type===d.MultiSelect}function er(e){return e.type===d.MultiSelectOption}var ei=function(e){return e.Off="OFF",e.Numbers="NUMBERS",e.Letters="LETTERS",e}({});function eu(e){return e.type===d.MultipleChoiceOption}function eo(e){return e.type===d.PageBreak}function el(e){return e.type===d.Payment}function ea(e){return e.type===d.RankingOption}function ed(e){return e.type===d.Rating}function ec(e){return e.type===d.RespondentCountry}function ep(e){return e.type===d.Signature}function ef(e){return e.type===d.Text}function es(e){return e.type===d.Textarea}function ey(e){return e.type===d.Title}function ev(e){return e.type===d.WalletConnect}var eg=g().object({objectPositionYPercent:g().number().allow(null).optional()}),em=g().object({label:g().string().allow(null).allow("").optional()}),eh=g().array().items(g().object({uuid:g().string().uuid().required(),field:g().object({uuid:g().string().uuid().required(),type:(r=g().string()).valid.apply(r,(0,m._)(Object.values(R))).required(),questionType:(i=g().string()).valid.apply(i,(0,m._)(Object.values(d))).required(),blockGroupUuid:g().string().uuid().required(),title:g().string().required()}).required(),defaultValue:g().any().optional()})),eT=g().array().items(g().array().min(1).max(2).items(g().alternatives().try(g().string(),g().array()),g().array().items(g().array().items(g().string()).length(2)))),e_=g().object({title:g().string().allow(null).optional(),cover:g().string().allow(null).optional(),coverSettings:eg.optional(),logo:g().string().allow(null).optional(),mentions:eh.optional(),button:em.optional(),safeHTMLSchema:eT.optional()});g().string().uuid().required(),g().string().valid(d.FormTitle).required(),g().string().uuid().required(),g().string().valid(d.FormTitle,d.Text).required(),e_.required();var eb=[d.ConditionalLogic,d.CalculatedFields,d.HiddenFields,d.Captcha,d.RespondentCountry],ex=n(78191),eU=(u={},(0,ex._)(u,d.MultipleChoiceOption,d.MultipleChoice),(0,ex._)(u,d.Checkbox,d.Checkboxes),(0,ex._)(u,d.DropdownOption,d.Dropdown),(0,ex._)(u,d.RankingOption,d.Ranking),(0,ex._)(u,d.MultiSelectOption,d.MultiSelect),u);d.Signature;var eE=[d.InputText,d.Textarea,d.InputNumber,d.InputEmail,d.InputPhoneNumber,d.InputLink,d.InputDate,d.InputTime,d.Rating,d.LinearScale,d.Checkbox,d.MultipleChoiceOption,d.DropdownOption,d.RankingOption,d.MultiSelectOption],eB=[d.InputText,d.InputNumber,d.InputEmail,d.InputLink,d.InputPhoneNumber,d.InputDate,d.InputTime,d.Textarea],ek=[d.MultipleChoice,d.Dropdown,d.Checkboxes,d.MultiSelect],eC=[d.Title,d.Label],eN=(0,m._)(eC).concat((0,m._)(eB)),eO=(o={},(0,ex._)(o,d.InputText,"Untitled short answer field"),(0,ex._)(o,d.Textarea,"Untitled long answer field"),(0,ex._)(o,d.InputLink,"Untitled link field"),(0,ex._)(o,d.InputEmail,"Untitled email field"),(0,ex._)(o,d.InputNumber,"Untitled number field"),(0,ex._)(o,d.InputPhoneNumber,"Untitled phone number field"),(0,ex._)(o,d.InputDate,"Untitled date field"),(0,ex._)(o,d.InputTime,"Untitled time field"),(0,ex._)(o,d.MultipleChoice,"Untitled multiple choice field"),(0,ex._)(o,d.Checkboxes,"Untitled checkboxes field"),(0,ex._)(o,d.Dropdown,"Untitled dropdown field"),(0,ex._)(o,d.FileUpload,"Untitled file upload field"),(0,ex._)(o,d.LinearScale,"Untitled linear scale field"),(0,ex._)(o,d.Rating,"Untitled rating field"),(0,ex._)(o,d.Ranking,"Untitled ranking field"),(0,ex._)(o,d.MultiSelect,"Untitled multi-select field"),(0,ex._)(o,d.Payment,"Untitled payment"),(0,ex._)(o,d.Signature,"Untitled signature"),(0,ex._)(o,d.Matrix,"Untitled matrix field"),(0,ex._)(o,d.HiddenFields,"Hidden fields"),(0,ex._)(o,d.CalculatedFields,"Calculated fields"),(0,ex._)(o,d.WalletConnect,"Untitled Wallet Connect field"),(0,ex._)(o,d.RespondentCountry,"Respondent's country"),o),eA=[d.InputText,d.Textarea,d.InputNumber,d.InputEmail,d.InputPhoneNumber,d.InputLink,d.InputDate,d.InputTime,d.FileUpload,d.Payment,d.Signature,d.Rating,d.LinearScale,d.Checkbox,d.MultipleChoiceOption,d.DropdownOption,d.RankingOption,d.Matrix,d.MatrixRow,d.MatrixColumn,d.MultiSelectOption,d.WalletConnect],eI=(0,m._)(eA).concat([d.CalculatedFields,d.HiddenFields,d.RespondentCountry]),eS=(l={},(0,ex._)(l,d.Question,[d.Title]),(0,ex._)(l,d.MultipleChoice,[d.MultipleChoiceOption]),(0,ex._)(l,d.Checkboxes,[d.Checkbox]),(0,ex._)(l,d.Dropdown,[d.DropdownOption]),(0,ex._)(l,d.Ranking,[d.RankingOption]),(0,ex._)(l,d.PageBreak,[d.PageBreak,d.Text]),(0,ex._)(l,d.Divider,[d.Divider,d.Text]),(0,ex._)(l,d.Matrix,[d.Matrix,d.MatrixColumn,d.MatrixColumn,d.MatrixColumn,d.MatrixRow,d.MatrixRow,d.MatrixRow]),(0,ex._)(l,d.MultiSelect,[d.MultiSelectOption]),l),eM=[d.MultipleChoice,d.Dropdown,d.Checkboxes,d.Ranking,d.Matrix,d.MultiSelect],eR=eM.filter(function(e){return e!==d.Matrix}),ew=[d.Image,d.EmbedVideo,d.EmbedAudio,d.Embed],eF=[d.InputText,d.Textarea,d.MultipleChoice,d.Checkboxes,d.Dropdown,d.MultiSelect,d.InputNumber,d.InputEmail,d.InputPhoneNumber,d.InputLink,d.FileUpload,d.InputDate,d.InputTime,d.LinearScale,d.Matrix,d.Rating,d.Payment,d.Signature,d.Ranking,d.WalletConnect],eD=[d.PageBreak,d.ThankYouPage,d.Text,d.Heading1,d.Heading2,d.Heading3,d.Divider,d.Title,d.Label],eL=[d.Title,d.Heading1,d.Heading2,d.Heading3,d.Label,d.Text,d.PageBreak,d.ThankYouPage,d.Image,d.Divider,d.Embed,d.EmbedAudio,d.EmbedVideo],eP=[d.Matrix,d.MatrixRow,d.MatrixColumn],eH=[d.ConditionalLogic,d.CalculatedFields,d.HiddenFields,d.RespondentCountry],eG=[d.CalculatedFields,d.HiddenFields],ej=[d.CalculatedFields,d.HiddenFields,d.RespondentCountry],eq=[d.PageBreak,d.Image,d.Divider,d.Embed,d.EmbedVideo,d.EmbedAudio,d.FileUpload,d.LinearScale,d.Rating,d.Payment,d.Signature,d.ConditionalLogic,d.CalculatedFields,d.HiddenFields,d.Captcha,d.WalletConnect,d.Matrix,d.RespondentCountry],eY=[d.HiddenFields,d.CalculatedFields,d.Matrix],eW=[d.FormTitle,d.PageBreak,d.ConditionalLogic,d.CalculatedFields,d.HiddenFields,d.Captcha,d.RespondentCountry],eX=[d.FormTitle,d.PageBreak,d.ThankYouPage,d.ConditionalLogic,d.HiddenFields,d.CalculatedFields,d.Matrix,d.MatrixRow,d.MatrixColumn,d.RespondentCountry],eQ=[d.FormTitle,d.MatrixRow,d.MatrixColumn],eK=[d.FileUpload,d.Payment,d.Signature],eV=(0,m._)(eI).concat((0,m._)(eM)),eJ=[d.MultipleChoice,d.Dropdown,d.Rating,d.LinearScale],eZ=[d.FormTitle,d.Text,d.Label,d.Title,d.Heading1,d.Heading2,d.Heading3,d.MatrixRow,d.MatrixColumn],ez=[d.MultipleChoice,d.MultiSelect,d.Checkboxes,d.Dropdown],e$=[d.InputText,d.Textarea,d.InputEmail,d.InputLink],e0=[d.Text,d.Label,d.Title,d.Heading1,d.Heading2,d.Heading3],e1=(0,m._)(ez).concat((0,m._)(e$),(0,m._)(e0),[d.Question,d.PageBreak]),e2=[d.MultipleChoice,d.Dropdown,d.LinearScale,d.Rating],e9=function(e,t,n){return 1===e?null==t?void 0:t[0]:n?n[e-2]:t.filter(function(e){return e.type===d.PageBreak})[e-2]},e7=function(e,t){var n=(void 0===e?"undefined":(0,a._)(e))==="object"&&(null==e?void 0:e.uuid)&&Object.values(d).includes(null==e?void 0:e.type)&&1?e.uuid:e,r=t.filter(function(e){var t=e.type;return[d.FormTitle,d.PageBreak].includes(t)}).findIndex(function(e){return e.uuid===n});return -1===r?null:r+1},e3=function(e){var t=!0,n=!1,r=void 0;try{for(var i,u=e[Symbol.iterator]();!(t=(i=u.next()).done);t=!0){var o=i.value;if(eo(o)&&o.payload.isThankYouPage)return!0}}catch(e){n=!0,r=e}finally{try{t||null==u.return||u.return()}finally{if(n)throw r}}return!1},e4=n(67143),e6=n(70376),e5=function(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},e8=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.inRespondMode,r=void 0!==n&&n,i=t.stripStyles,u=void 0!==i&&i,o="";return e.forEach(function(e){var n=(0,e4._)(e,2),i=n[0],l=n[1];if("string"==typeof i&&!l){o+=(0,e6.QZ)(i);return}if(l&&l.length>0){var a="span",d=[],c=[];l.forEach(function(e){var t=(0,e4._)(e,2),n=t[0],u=t[1];"tag"===n&&"div"===u?a="div":"tag"===n&&"p"===u?a="p":"tag"===n&&"br"===u?(a="br",i=""):"href"===n?(a="a",c.push('href="'.concat(e5(u),'"')),c.push('target="_blank"'),c.push('rel="noreferrer"')):"mention"===n?(c.push('class="mention"'),c.push('contenteditable="false"'),c.push('data-uuid="'.concat(e5(u),'"')),r&&(i="")):d.push("".concat(e5(n),": ").concat(e5(u),";"))}),!1===u&&d.length>0&&c.push('style="'.concat(d.join(" "),'"')),"br"===a?o+="<br>":o+="<".concat(a," ").concat(c.join(" "),">").concat("string"==typeof i?i:e8(i,t),"</").concat(a,">")}}),o}},75345:(e,t,n)=>{n.d(t,{Ry:()=>a,VK:()=>l,ul:()=>u,zj:()=>o});var r=n(67143),i=n(83242),u=10,o=7,l=function(e){var t=new Map(e),n=t.size,o=0,l=0;if(t.forEach(function(e){o+=e,l+=+(0===e)}),l>0){var a=Math.round(100/n),d=a*l,c=n-l;(0,i._)(t).sort(function(e,t){return e[1]-t[1]}).forEach(function(e){var n=(0,r._)(e,2),i=n[0],l=n[1];if(0===l)t.set(i,a),o+=a;else{var p=Math.round(d/c),f=Math.round(l-p);f>=u?(t.set(i,f),o-=p,d-=p):(t.set(i,u),o-=l-u,d-=l-u),c--}})}if(o<100){var p=Math.round((100-o)/n);t.forEach(function(e,n){t.set(n,e+p),o+=p})}if(100!==o){var f=100-o;(0,i._)(t).sort(function(e,t){return f>0?e[1]-t[1]:t[1]-e[1]}).forEach(function(e){var n=(0,r._)(e,2),i=n[0],u=n[1];if(0!==f){var l=f>0?1:-1;t.set(i,u+l),o+=l,f-=l}})}return t},a=function(e){var t=100/e.length;return e.every(function(e){return 1>=Math.abs(e-t)})}},75729:(e,t,n)=>{n.d(t,{X2:()=>r,Yd:()=>u,bE:()=>i,n0:()=>l,v9:()=>o});var r=function(e){return e.Insert="FormBuilder.Insert",e.Replace="FormBuilder.Replace",e.ReplaceAll="FormBuilder.ReplaceAll",e.RestoreRevision="FormBuilder.RestoreRevision",e.Remove="FormBuilder.Remove",e.Move="FormBuilder.Move",e.CreateColumnList="FormBuilder.CreateColumnList",e.CreateColumn="FormBuilder.CreateColumn",e.AddToColumn="FormBuilder.AddToColumn",e.DetachFromColumn="FormBuilder.DetachFromColumn",e.UpdateColumnRatio="FormBuilder.UpdateColumnRatio",e.UpdateValue="FormBuilder.UpdateValue",e.UpdatePayload="FormBuilder.UpdatePayload",e.Refresh="FormBuilder.Refresh",e.RefreshAll="FormBuilder.RefreshAll",e.UpdateFormSettings="FormBuilder.UpdateFormSettings",e.OpenInsertBlockMenu="FormBuilder.OpenInsertBlockMenu",e.OpenBlockSettingsContextMenu="FormBuilder.OpenBlockSettingsContextMenu",e.OpenBlockActionsContextMenu="FormBuilder.OpenBlockActionsContextMenu",e.OpenTextFormatContextMenu="FormBuilder.OpenTextFormatContextMenu",e.OpenAuthMenu="FormBuilder.OpenAuthMenu",e.OpenUpgradePlanMenu="FormBuilder.OpenUpgradePlanMenu",e.OpenMentionMenu="FormBuilder.OpenMentionMenu",e.OpenMentionSettingsMenu="FormBuilder.OpenMentionSettingsMenu",e.InsertMention="FormBuilder.InsertMention",e.RemoveMention="FormBuilder.RemoveMention",e.UpdateMention="FormBuilder.UpdateMention",e.UpdateConditionals="FormBuilder.UpdateConditionals",e.UpdateConditionalActions="FormBuilder.UpdateConditionalAction",e.UpdateCalculatedFields="FormBuilder.UpdateCalculatedFields",e.UpdateHiddenFields="FormBuilder.UpdateHiddenFields",e.OpenCommandsMenu="FormBuilder.OpenCommandsMenu",e.OpenBulkInsertOptionsMenu="FormBuilder.OpenBulkInsertOptionsMenu",e.Undo="FormBuilder.Undo",e.Redo="FormBuilder.Redo",e.AddTitle="FormBuilder.AddTitle",e.TurnInto="FormBuilder.TurnInto",e}({}),i=function(e){return e.Upload="UPLOAD",e.Link="LINK",e.Unsplash="UNSPLASH",e.Gallery="GALLERY",e}({}),u=function(e){return e.Start="START",e.End="END",e.Inherit="INHERIT",e}({}),o=function(e){return e.SignUp="SIGN_UP",e.Publish="PUBLISH",e.PaymentBlock="PAYMENT_BLOCK",e.UpgradePlan="UPGRADE_PLAN",e}({}),l=function(e){return e.AddLink="ADD_LINK",e.ApplyLastTextColor="APPLY_LAST_TEXT_COLOR",e}({})},75970:(e,t,n)=>{n.d(t,{ZJ:()=>g,cp:()=>T,vf:()=>m,vt:()=>h});var r=n(78191),i=n(99649),u=n(93096),o=n(83242),l=n(72142),a=n(83909),d=n.n(a),c=n(83817),p=n.n(c),f=n(9155),s=n(13527),y=n(84580),v=function(e,t,n){var r=e.type,i=e.payload;if(r===l.RZ.Group&&(null==i?void 0:i.conditionals)&&i.logicalOperator)return g(i.conditionals,i.logicalOperator,t,n);if(r===l.RZ.Single&&(null==i?void 0:i.field)&&(null==i?void 0:i.comparison)){var u=i.field,o=i.comparison,a=i.value,c=(0,y.Wc)(t,u);(0,l.dt)(a)&&(a=(0,y.Wc)(t,a));try{switch(o){case l.yh.Is:if(u.questionType===l._B.Matrix)return Array.isArray(a)||(a=[a]),void 0!==c&&p()(c,a);if(Array.isArray(a)&&1===a.length&&(a=a[0]),Array.isArray(c))return 1===c.length&&_(c[0],a,n);return void 0!==c&&_(c,a,n);case l.yh.IsNot:if(u.questionType===l._B.Matrix)return Array.isArray(a)||(a=[a]),void 0!==c&&!p()(c,a);if(Array.isArray(a)&&1===a.length&&(a=a[0]),Array.isArray(c))return 1!==c.length||!1===_(c[0],a,n);return void 0!==c&&!1===_(c,a,n);case l.yh.IsAnyOf:if(Array.isArray(a)&&!Array.isArray(c))return a.includes(c);if(!Array.isArray(a)||!Array.isArray(c))return _(c,a,n);return a.some(function(e){return c.some(function(t){return _(t,e,n)})});case l.yh.IsEveryOf:if(!Array.isArray(a)||!Array.isArray(c))return _(c,a,n);return a.every(function(e){return c.some(function(t){return _(t,e,n)})});case l.yh.Contains:if(Array.isArray(c))return void 0!==a&&c.some(function(e){return _(e,a,n)});return void 0!==c&&void 0!==a&&RegExp(d()(a),"i").test(c);case l.yh.DoesNotContain:if(Array.isArray(c))return void 0!==a&&!1===c.some(function(e){return _(e,a,n)});return void 0!==c&&void 0!==a&&!1===RegExp(d()(a),"i").test(c);case l.yh.StartsWith:return void 0!==c&&void 0!==a&&RegExp("^".concat(d()(a)),"i").test(c);case l.yh.DoesNotStartWith:return void 0!==c&&void 0!==a&&!1===RegExp("^".concat(d()(a)),"i").test(c);case l.yh.EndsWith:return void 0!==c&&void 0!==a&&RegExp("".concat(d()(a),"$"),"i").test(c);case l.yh.DoesNotEndWith:return void 0!==c&&void 0!==a&&!1===RegExp("".concat(d()(a),"$"),"i").test(c);case l.yh.IsEmpty:if(Array.isArray(c))return 0===c.length;return void 0===c||""===c;case l.yh.IsNotEmpty:if(Array.isArray(c))return c.length>0;return void 0!==c&&""!==c;case l.yh.Equal:return Number(c)===Number(a);case l.yh.NotEqual:return Number(c)!==Number(a);case l.yh.GreaterThan:return Number(c)>Number(a);case l.yh.LessThan:return Number(c)<Number(a);case l.yh.GreaterOrEqualThan:return Number(c)>=Number(a);case l.yh.LessOrEqualThan:return Number(c)<=Number(a);case l.yh.IsBefore:if(/^[0-9]{2}:[0-9]{2}$/.test(c))return Date.parse("01/01/2000 ".concat(c))<Date.parse("01/01/2000 ".concat(a));return Date.parse(c)<Date.parse(a);case l.yh.IsAfter:if(/^[0-9]{2}:[0-9]{2}$/.test(c))return Date.parse("01/01/2000 ".concat(c))>Date.parse("01/01/2000 ".concat(a));return Date.parse(c)>Date.parse(a)}}catch(e){(0,f.Cp)(e)}}return!1},g=function(e,t,n,r){var i=e.map(function(e){return v(e,n,r)});return t===l.IO.And?i.every(function(e){return e}):t===l.IO.Or&&i.some(function(e){return e})},m=function(e,t,n,a){var d=t.filter(function(e){return e.type===l._B.ConditionalLogic}),c=t.filter(function(e){return e.payload.isHidden}).map(function(e){return e.uuid});if(0===d.length&&0===c.length)return e;var p=(0,o._)(e),f=!0,s=!1,y=void 0;try{for(var v,m=d[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var h=v.value.payload,T=h.logicalOperator,_=h.conditionals,b=h.actions;if(g(_,T,n,t)){var x=!0,U=!1,E=void 0;try{for(var B,k=b[Symbol.iterator]();!(x=(B=k.next()).done);x=!0)!function(){var e,t,n,r=B.value;r.type===l.JI.ShowBlocks&&(null==(e=r.payload)?void 0:e.showBlocks)&&(c=c.filter(function(e){var t,n;return(null==(n=r.payload)||null==(t=n.showBlocks)?void 0:t.includes(e))===!1})),r.type===l.JI.HideBlocks&&Array.isArray(null==(t=r.payload)?void 0:t.hideBlocks)&&(c=(0,o._)(c).concat((0,o._)(r.payload.hideBlocks))),r.type===l.JI.RequireAnswer&&(null==(n=r.payload)?void 0:n.requireAnswer)&&(p=p.map(function(e){var t,n;return(null==(n=r.payload)||null==(t=n.requireAnswer)?void 0:t.includes(e.groupUuid))?(0,u._)((0,i._)({},e),{payload:(0,u._)((0,i._)({},e.payload),{isRequired:!0})}):e}))}()}catch(e){U=!0,E=e}finally{try{x||null==k.return||k.return()}finally{if(U)throw E}}}}}catch(e){s=!0,y=e}finally{try{f||null==m.return||m.return()}finally{if(s)throw y}}if(c.length>0){p=p.filter(function(e){return!1===c.includes(e.uuid)});var C=[];if(t.forEach(function(e){var t=e.uuid,d=e.type,f=e.groupUuid,s=e.groupType,y=e.payload;if(!1!==c.includes(t)&&!l.MZ.includes(d)){if(l.Og.includes(s)&&C.push(f),void 0!==n[f]&&!(y.hasDefaultAnswer&&void 0!==y.defaultAnswer)&&!l.$y.includes(d))if(d===l._B.Checkbox||d===l._B.RankingOption||d===l._B.MultiSelectOption){if(Array.isArray(n[f])&&n[f].includes(t)){var v=(0,o._)(n[f]);v.splice(v.indexOf(t),1),null==a||a((0,r._)({},f,v))}}else if([l._B.DropdownOption,l._B.MultipleChoiceOption].includes(d))if(Array.isArray(n[f])&&n[f].includes(t)){var g=(0,o._)(n[f]);g.splice(g.indexOf(t),1),null==a||a((0,r._)({},f,g))}else n[f]===t&&(null==a||a((0,r._)({},f,void 0)));else d!==l._B.Payment&&(null==a||a((0,r._)({},f,void 0)));if(d===l._B.MatrixRow&&void 0!==n[f]&&n[f][t]&&(null==a||a((0,r._)({},f,(0,u._)((0,i._)({},n[f]),(0,r._)({},t,void 0))))),d===l._B.MatrixColumn&&void 0!==n[f]){var m=Object.keys(n[f]);if(m.length>0){var h=(0,i._)({},n[f]),T=!1;m.forEach(function(e){h[e]&&h[e].includes(t)&&(h[e].splice(h[e].indexOf(t),1),T=!0)}),T&&(null==a||a((0,r._)({},f,h)))}}(d===l._B.MatrixRow||d===l._B.MatrixColumn)&&p.filter(function(e){return e.groupUuid===f&&e.type!==l._B.Matrix}).every(function(e){return c.includes(e.uuid)})&&(p=p.filter(function(e){return e.groupUuid!==f}))}}),C.length>0){var N=new Map;p=p.map(function(e){if(C.includes(e.groupUuid)&&(e.type===l._B.Dropdown||e.type===l._B.MultiSelect))return(0,u._)((0,i._)({},e),{payload:(0,u._)((0,i._)({},e.payload),{options:e.payload.options.filter(function(e){var t=e.value;return!1===c.includes(t)})})});if(C.includes(e.groupUuid)&&[l._B.MultipleChoiceOption,l._B.Checkbox,l._B.RankingOption].includes(e.type)){N.get(e.groupUuid)||N.set(e.groupUuid,{firstBlockUuid:p.find(function(t){return t.groupUuid===e.groupUuid}).uuid,lastBlockUuid:(0,o._)(p).reverse().find(function(t){return t.groupUuid===e.groupUuid}).uuid});var t=N.get(e.groupUuid),n=t.firstBlockUuid,r=t.lastBlockUuid;return(0,u._)((0,i._)({},e),{payload:(0,u._)((0,i._)({},e.payload),{isFirst:n===e.uuid,isLast:r===e.uuid})})}return e}).filter(function(e){return e.type!==l._B.Dropdown&&e.type!==l._B.MultiSelect||0!==e.payload.options.length})}}return p},h=function(e,t,n,r,i){var u=e+1,o=t.filter(function(e){return e.type===l._B.ConditionalLogic});if(0===o.length)return u&&u<=n?u:null;var a=!0,d=!1,c=void 0;try{for(var p,f=o[Symbol.iterator]();!(a=(p=f.next()).done);a=!0){var s=p.value.payload,y=s.logicalOperator,v=s.conditionals,m=s.actions;if(g(v,y,i,r)){var h=!0,T=!1,_=void 0;try{for(var b,x=m[Symbol.iterator]();!(h=(b=x.next()).done);h=!0){var U,E,B,k,C=b.value;C.type===l.JI.JumpToPage&&void 0!==(null==(U=C.payload)?void 0:U.jumpToPage)&&(u=(null==(B=C.payload)||null==(E=B.jumpToPage)?void 0:E.toString())==="0"?null:"number"==typeof(null==(k=C.payload)?void 0:k.jumpToPage)?C.payload.jumpToPage:(0,l.YP)(C.payload.jumpToPage,r))}}catch(e){T=!0,_=e}finally{try{h||null==x.return||x.return()}finally{if(T)throw _}}}}}catch(e){d=!0,c=e}finally{try{a||null==f.return||f.return()}finally{if(d)throw c}}return u&&u<=n?u:null},T=function(e,t,n){for(var r=[1],i=t.length,u=e.filter(function(e){return e.type===l._B.PageBreak}),o=1;null!==o;){var a,d=o,c=t[d-1];if(o=h(d,c,i,e,n),d===o){o=null;continue}if(null!==o){if(r.includes(o)){o=null;continue}var p=(0,l.Km)(o,e,u);if(null==p||null==(a=p.payload)?void 0:a.isThankYouPage){o=null;continue}r.push(o)}}return r},_=function(e,t,n){if(e===t)return!0;if("string"==typeof e&&"string"==typeof t&&!1===(0,s.O)(e)&&!0===(0,s.O)(t)){var r,i=n.find(function(e){return e.uuid===t});if(null==i||null==(r=i.payload)?void 0:r.isOtherOption)return!0}return!1}},80428:(e,t,n)=>{n.d(t,{Gr:()=>p,Gz:()=>m,JL:()=>l,JU:()=>c,PV:()=>o,Sr:()=>a,YY:()=>b,ac:()=>g,ao:()=>h,aw:()=>T,f9:()=>u,i0:()=>_,l0:()=>d,mM:()=>s,pn:()=>v,vn:()=>f,wT:()=>y});var r=n(75729),i=n(89498),u=function(e,t){try{var n=document.createRange();n.setStart(e,t);var r=window.getSelection();null==r||r.removeAllRanges(),null==r||r.addRange(n)}catch(e){}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="",n=window.getSelection();try{if(n&&n.rangeCount>0&&n.focusNode){var r=n.getRangeAt(0).cloneRange();r.collapse(!0),r.setStart(n.focusNode,0);var i=r.toString();t=i.charAt(i.length-e)}}catch(e){}return t},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="",n=window.getSelection();try{if(n&&n.rangeCount>0&&n.focusNode){var r=n.getRangeAt(0).cloneRange();r.collapse(!0),r.setEnd(n.focusNode,n.focusOffset+e),t=r.toString().charAt(e-1)}}catch(e){}return t},a=function(){var e=window.getSelection();return e&&e.rangeCount&&e.focusNode?e.focusOffset:0},d=function(){var e=window.getSelection();return e&&e.rangeCount&&e.focusNode?e.focusNode:null},c=function(){var e=window.getSelection();return e&&e.rangeCount&&e.focusNode?[e.focusNode,e.focusOffset]:[null,0]},p=function(e){try{var t=e.getClientRects();if(e.collapsed&&e.startContainer&&e.startContainer.nodeType===Node.ELEMENT_NODE&&(0===e.startContainer.childNodes.length||0===t.length)){var n=e.startContainer,r="rtl"===getComputedStyle(n).direction,i=e.startContainer.getBoundingClientRect();return{x:r?i.right:i.x,y:i.y}}if(0===t.length)return{x:0,y:0};var u=t[0],o=u.x,l=u.y;return{x:o,y:l}}catch(e){return{x:0,y:0}}},f=function(){var e=window.getSelection();return e&&e.rangeCount&&e.focusNode?p(e.getRangeAt(0)):{x:0,y:0}},s=function(){var e=window.getSelection();return!!e&&!!e.rangeCount&&!!e.focusNode&&!!(0,i.U9)(e.focusNode)},y=function(){var e=window.getSelection();if(!e||!e.rangeCount||!e.focusNode||e.anchorOffset!==e.focusOffset)return!1;var t=(0,i.U9)(e.focusNode);if(!t)return!1;if(e.focusNode===t&&0===e.focusOffset)return!0;var n=(0,i.T8)(t);return!!(e.focusNode===n&&0===e.focusOffset||e.focusNode.nodeType===Node.ELEMENT_NODE&&e.focusNode.contains(n)&&0===e.focusOffset)},v=function(){var e,t=window.getSelection();if(!t||!t.rangeCount||!t.focusNode||t.anchorOffset!==t.focusOffset)return!1;var n=(0,i.U9)(t.focusNode);if(!n)return!1;if(t.focusNode===n)return!0;var r=(0,i.xF)(n);return!!(t.focusNode===r&&t.focusOffset===(null==(e=t.focusNode.textContent)?void 0:e.length)||t.focusNode.nodeType===Node.ELEMENT_NODE&&t.focusNode.contains(r)&&t.focusOffset===t.focusNode.childNodes.length)},g=function(){var e=window.getSelection();if(!e||!e.rangeCount||!e.focusNode)return!1;var t=(0,i.U9)(e.focusNode);if(!t)return!1;if(e.focusNode===t)return!0;var n=(0,i.T8)(t);if(!n)return!0;var r=document.createRange();return r.setStart(n,0),f().y===p(r).y},m=function(){var e,t,n=window.getSelection();if(!n||!n.rangeCount||!n.focusNode)return!1;var r=(0,i.U9)(n.focusNode);if(!r)return!1;if(n.focusNode===r)return!0;var u=(0,i.xF)(r);if(!u)return!0;var o=document.createRange();return o.setStart(u,null!=(t=null==(e=u.textContent)?void 0:e.length)?t:0),f().y===p(o).y},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Yd.Start,n=(0,i.X0)(e);if(n){if(t===r.Yd.Start)return void n.focus();if(t===r.Yd.End){var o,l,a=(0,i.xF)(n);return a?void u(a,null!=(l=null==(o=a.textContent)?void 0:o.length)?l:0):void n.focus()}if(t===r.Yd.Inherit){var d,c,s=e>(0,i.lx)(),y=s?(0,i.T8)(n):(0,i.xF)(n);if(!y)return void n.focus();var v=f().x,g=document.createRange();g.setStart(y,s?0:null!=(c=null==(d=y.textContent)?void 0:d.length)?c:0);var m=p(g).y,T=(0,i.j7)(v,m);if(!T)return void n.focus();if(!1===n.contains(T))return void h(e,r.Yd.End);if(!1===(0,i.bx)(T)){var _=(0,i.Gb)(T);return _?void u(_,0):void u(n,1)}var b=(0,i.K_)(T,v,m);return void u(T,b)}}},T=function(){var e=window.getSelection();if(!e||!e.rangeCount||!e.focusNode)return["",""];var t=(0,i.U9)(e.focusNode);if(!t)return["",""];var n=document.createRange();n.setStart(t,0),n.setEnd(e.focusNode,e.focusOffset);var r=(0,i.af)((0,i.T6)(n.cloneContents().childNodes)),u=document.createRange();return u.selectNodeContents(t),u.collapse(!1),u.setStart(e.focusNode,e.focusOffset),[r,(0,i.af)((0,i.T6)(u.cloneContents().childNodes))]},_=function(e,t){document.querySelectorAll(".mention").forEach(function(e){return e.setAttribute("contenteditable","true")}),document.execCommand(e,!1,t),document.querySelectorAll(".mention").forEach(function(e){return e.setAttribute("contenteditable","false")})},b=function(){var e,t,n,r={isBold:!1,isItalic:!1,isUnderline:!1,foreColor:"",backColor:"",link:void 0};document.queryCommandState&&(r.isBold=document.queryCommandState("bold"),r.isItalic=document.queryCommandState("italic"),r.isUnderline=document.queryCommandState("underline")),document.queryCommandValue&&(r.foreColor=document.queryCommandValue("foreColor"),r.backColor=document.queryCommandValue("backColor"));var i=window.getSelection();return i&&(r.link=null==(n=i.anchorNode)||null==(t=n.parentElement)||null==(e=t.closest("a"))?void 0:e.href),r}},84580:(e,t,n)=>{n.d(t,{BN:()=>w,CI:()=>I,H2:()=>O,HQ:()=>M,JP:()=>F,No:()=>P,Ry:()=>S,S4:()=>C,S5:()=>H,TW:()=>L,Wb:()=>Z,Wc:()=>A,dd:()=>G,f8:()=>V,it:()=>K,pE:()=>W,pk:()=>D,qU:()=>X,r9:()=>J,sJ:()=>R});var r=n(78191),i=n(99649),u=n(93096),o=n(72142),l=n(70376),a=n(46355),d=n(2185),c=n(13485),p=n(70594),f=n(31877),s=n(73272),y=n.n(s),v=n(36002),g=n(9155),m=n(13527),h=n(36526),T=n(3656),_=n(70259),b=n(50499),x=n(97279),U=n(30279),E=n(94234),B=n(75970),k=n(91184),C=function(e,t,n,r){if(void 0===t)return"";if(o.Og.includes(e))return N(e,t,n,null==r?void 0:r.fieldUuid);if(e===o._B.InputDate){var i=(0,d.H)(t);if(!(0,c.f)(i))return"";var u,a=n.find(function(e){return e.groupUuid===(null==r?void 0:r.fieldUuid)});return(null==a||null==(u=a.payload)?void 0:u.format)?(0,p.GP)(i,a.payload.format):(null==r?void 0:r.dateFormatProps)?(0,p.GP)(i,r.dateFormatProps.f,{locale:r.dateFormatProps.locale}):(0,p.GP)(i,"MMMM d, yyyy")}if(e===o._B.InputNumber){var f,s,y,v,g=n.find(function(e){return e.groupUuid===(null==r?void 0:r.fieldUuid)});return(0,l.ZV)(t,{decimalSeparator:null==g||null==(f=g.payload)?void 0:f.decimalSeparator,thousandsSeparator:null==g||null==(s=g.payload)?void 0:s.thousandsSeparator,prefix:null==g||null==(y=g.payload)?void 0:y.prefix,suffix:null==g||null==(v=g.payload)?void 0:v.suffix})}return e===o._B.RespondentCountry&&(null==r?void 0:r.t)?(0,l.X6)(r.t)[t]||t||"--":t},N=function(e,t,n,r){if(!t)return"";if(e===o._B.Checkboxes||e===o._B.MultiSelect){var i=n.filter(function(e){return t.includes(e.uuid)}).map(function(e){return e.payload.text}),u=t.find(function(e){return!1===(0,m.O)(e)});return void 0!==u&&i.push(u),i.join(", ")}if(e===o._B.Ranking)return t.map(function(e){var t,r;return null!=(r=null==(t=n.find(function(t){return t.uuid===e}))?void 0:t.payload.text)?r:""}).join(", ");if([o._B.MultipleChoice,o._B.Dropdown].includes(e)){if(Array.isArray(t)){var l,a,d=n.filter(function(e){return t.includes(e.uuid)}).map(function(e){return e.payload.text}),c=t.find(function(e){return!1===(0,m.O)(e)});return void 0!==c&&d.push(c),d.join(", ")}return"string"==typeof t&&!1===(0,m.O)(t)?t:null!=(a=null==(l=n.find(function(e){return e.uuid===t}))?void 0:l.payload.text)?a:""}if(e===o._B.Matrix){var p=[];if(p=r?t[r]:t)return p.map(function(e){return(0,_.Q)(e,n)}).join(", ")}return t},O=function(e,t,n,r){if("string"==typeof n){if(t===o._B.Checkboxes||t===o._B.Ranking||t===o._B.MultiSelect){var i=r.filter(function(t){return t.groupUuid===e&&t.payload.text===n}).map(function(e){return e.uuid});return i.length>0?i:n.includes(",")?(n.split(/,\s?/).forEach(function(t){var n=r.find(function(n){return n.groupUuid===e&&n.payload.text===t});n&&i.push(n.uuid)}),i.length>0?i:void 0):void 0}if([o._B.MultipleChoice,o._B.Dropdown].includes(t)){var u,l=r.find(function(t){return t.groupUuid===e});if((null==l?void 0:l.payload.allowMultiple)&&n.includes(",")){var a=[];return n.split(/,\s?/).forEach(function(t){var n=r.find(function(n){return n.groupUuid===e&&n.payload.text===t});n&&a.push(n.uuid)}),a.length>0?a:void 0}var d=null==(u=r.find(function(t){return t.groupUuid===e&&t.payload.text===n}))?void 0:u.uuid;return d?[d]:void 0}}},A=function(e,t){var n=void 0;return t.uuid===t.blockGroupUuid?e[t.uuid]:e[t.blockGroupUuid]?e[t.blockGroupUuid][t.uuid]:""},I=function(e,t,n){var r=A(e,t);return o.Og.includes(t.questionType)&&(r=N(t.questionType,r,n)),t.questionType===o._B.RespondentCountry&&r&&(0,l.X6)(f.Ay.t)[r]||r},S=function(e,t,n,r){return(0,o.dt)(e)&&(e=I(n,e,r)),t!==o.ZH.Number||isNaN(parseFloat(e))||(e=parseFloat(e)),e},M=function(e,t,n){var r={},i=e.indexOf("?");new URLSearchParams(-1!==i?e.slice(i):"").forEach(function(e,t){r[t]=e});var u={},l=!0,a=!1,d=void 0;try{for(var c,p=t[Symbol.iterator]();!(l=(c=p.next()).done);l=!0){var f=c.value;if((0,o.En)(f)&&!u[f.groupUuid]&&n&&(u[f.groupUuid]=n),(0,o.bt)(f)){var s=!0,y=!1,v=void 0;try{for(var g,m=f.payload.hiddenFields[Symbol.iterator]();!(s=(g=m.next()).done);s=!0){var h=g.value;(null==h?void 0:h.name)&&void 0!==r[h.name]&&(u[f.groupUuid]||(u[f.groupUuid]={}),u[f.groupUuid][h.uuid]=r[h.name])}}catch(e){y=!0,v=e}finally{try{s||null==m.return||m.return()}finally{if(y)throw v}}}}}catch(e){a=!0,d=e}finally{try{l||null==p.return||p.return()}finally{if(a)throw d}}return u},R=function(e,t,n,l){var a=(0,E.B)(e,t,n,l),d=l.filter(function(e){return e.type===o._B.CalculatedFields});return 0===d.length?{}:d.reduce(function(e,t){var n=a[t.groupUuid];return n?(0,u._)((0,i._)({},e),(0,r._)({},t.groupUuid,n)):e},{})},w=function(e,t){var n=a.D.get("FORM_DATA_".concat(e));if(!n)return{};var r=JSON.parse(n),i=Object.keys(r),u=!0,d=!1,c=void 0;try{for(var p,f=i[Symbol.iterator]();!(u=(p=f.next()).done);u=!0)!function(){var e=p.value,n=t.find(function(t){return t.groupUuid===e});if(!n||!o.Og.includes(n.groupType))return;var i=r[e];if(!(0,l.Im)(i)){var u=t.filter(function(t){return t.groupUuid===e});if(n.groupType===o._B.Matrix){var a=function(t){if(!u.find(function(e){return e.uuid===t}))return delete r[e][t],"continue";var n=i[t],o=!0,l=!1,a=void 0;try{for(var d,c=n[Symbol.iterator]();!(o=(d=c.next()).done);o=!0)!function(){var n=d.value;u.find(function(e){return e.uuid===n})||(r[e][t]=r[e][t].filter(function(e){return e!==n}))}()}catch(e){l=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(l)throw a}}};for(var d in i)a(d)}else if(Array.isArray(i)){var c=!0,f=!1,s=void 0;try{for(var y,v=i[Symbol.iterator]();!(c=(y=v.next()).done);c=!0)!function(){var t=y.value,n=u.find(function(e){return e.uuid===t});!n&&!1===(0,m.O)(t)&&u.length>0&&u[0].payload.hasOtherOption&&(n=u[0]),n||(r[e]=r[e].filter(function(e){return e!==t}))}()}catch(e){f=!0,s=e}finally{try{c||null==v.return||v.return()}finally{if(f)throw s}}}else{var g=u.find(function(e){return e.uuid===i});!g&&!1===(0,m.O)(i)&&u.length>0&&u[0].payload.hasOtherOption&&(g=u[0]),g||delete r[e]}}}()}catch(e){d=!0,c=e}finally{try{u||null==f.return||f.return()}finally{if(d)throw c}}return r},F=function(e,t){a.D.set("FORM_DATA_".concat(e),JSON.stringify(t))},D=function(e){a.D.remove("FORM_DATA_".concat(e))},L=function(e){var t="FORM_SESSION_".concat(e),n=a.D.get(t);if(n)return n;var r=(0,v.A)();return a.D.set(t,r),r},P=function(e){a.D.remove("FORM_SESSION_".concat(e))},H=function(e){var t="RESPONDENT",n={},r=a.D.get(t);return r&&(n=JSON.parse(r))&&n[e]?n[e]:(n[e]=(0,v.A)(),a.D.set(t,JSON.stringify(n)),n[e])},G=function(e,t){var n=t.slice(0,e).reverse().filter(function(e){return e.type===o._B.PageBreak})[0];return null!=n?n:t[0]},j=function(e){var t=[];return e.forEach(function(e){e.forEach(function(e){var n=e.payload;t.push((null==n?void 0:n.html)||(null==n?void 0:n.placeholder)||"")})}),/password|pa{0,3}s[s|\\*]{0,2}w[0|o|\\*]{0,3}r{0,1}d|pass\sword|pass\*{1,3}w[o]{0,1}rd|jelszó|пароль|kata[\s|-]{0,2}sandi|sandi anda|contrase[ñ|n][y]{0,1}a|senh[a|ä|á]|Passwort|wachtwoord|Passwört|Şifre|m[o|ö]t[s]{0,1} de passe/i.test(t.join(" "))},q=function(e,t,n){var r=e.filter(function(e){return e.type===o._B.ConditionalLogic});if(0===r.length)return!1;var i=!0,u=!1,l=void 0;try{for(var a,d=r[Symbol.iterator]();!(i=(a=d.next()).done);i=!0){var c=a.value.payload,p=c.logicalOperator,f=c.conditionals,s=c.actions,y=!0,v=!1,g=void 0;try{for(var m,h=s[Symbol.iterator]();!(y=(m=h.next()).done);y=!0)if(m.value.type===o.JI.HideButtonToDisableCompletion&&(0,B.ZJ)(f,p,t,n))return!0}catch(e){v=!0,g=e}finally{try{y||null==h.return||h.return()}finally{if(v)throw g}}}}catch(e){u=!0,l=e}finally{try{i||null==d.return||d.return()}finally{if(u)throw l}}return!1},Y=function(e,t,n,r,i){var u,l=null!=(u=t[e-1])?u:[];l=(0,B.vf)(l,n,r,i),l=(0,U.mG)(l,r);var a=Array.from((0,T.Fx)(l).values()).filter(function(e){return!o.P_.includes(e.type)});return{pageBlocks:l,pageQuestions:a}},W=function(e,t,n,r,i,u){var a,d,c,p,f,s,y,v,g,m,T=null==(d=n[0])||null==(a=d.payload)?void 0:a.logo,_=null==(p=n[0])||null==(c=p.payload)?void 0:c.cover,b=null==(s=n[0])||null==(f=s.payload)?void 0:f.coverSettings,x=t.length,U=Y(e,t,n,i,u),E=U.pageBlocks,k=U.pageQuestions,C=(0,B.vt)(e,E,x,n,i),N=(0,o.Km)(e,n),O=!!(null==N||null==(y=N.payload)?void 0:y.isThankYouPage),A=C?(0,o.Km)(C,n):void 0,I=null===C||(null==A||null==(v=A.payload)?void 0:v.isThankYouPage),S=!O&&!q(E,i,n),M=!!(null==r?void 0:r.pageAutoJump)&&S&&!I&&1===k.length&&(0,h.NP)(k[0],E),R=k.every(function(e){return void 0!==i[e.blockGroupUuid]&&!1===(0,l.Im)(i[e.blockGroupUuid])});return{logo:T,cover:_,coverSettings:b,pageBlocks:E,pageQuestions:k,nextPage:C,isCustomThankYouPage:O,isLastInputPage:I,canAutoJumpToNextPage:M,pageFilledIn:R,showSubmitButton:S,showBackButton:!O&&1!==e,buttonLabel:null==N||null==(m=N.payload)||null==(g=m.button)?void 0:g.label,showMaliciousFormWarning:j(t)}},X=function(e,t,n,r,i,u){try{var o=[],l=(0,x.ww)((0,U.Li)(i)),a=!0,d=!1,c=void 0;try{for(var p,f=l[Symbol.iterator]();!(a=(p=f.next()).done);a=!0){var s=p.value,y=s.uuid,v=s.title,m=s.questionType;o.push({id:y,title:v,type:m,answer:{value:I(u,s,i),raw:A(u,s)}})}}catch(e){d=!0,c=e}finally{try{a||null==f.return||f.return()}finally{if(d)throw c}}return{id:e,formId:n,formName:r,respondentId:t,createdAt:new Date,fields:o}}catch(e){return(0,g.Cp)(e),{}}},Q=[o._B.InputDate,o._B.InputTime],K=function(){setTimeout(function(){var e,t,n=null==(e=document.forms[0])?void 0:e.elements[0];if(n){var r=null==(t=n.closest("[data-block-type]"))?void 0:t.getAttribute("data-block-type");!Q.includes(r)&&(0,b.YG)(n)&&("TEXTAREA"===n.tagName||"INPUT"===n.tagName&&["text","email","number","tel","url"].includes(n.type))&&n.focus()}},100)},V=function(){setTimeout(function(){var e=document.querySelector(".tally-validation-error");if(e){var t=e.closest(".tally-block"),n=null==t?void 0:t.querySelector('[aria-invalid="true"]');if(n){n.focus(),!1===(0,b.YG)(n)&&n.scrollIntoView({behavior:"smooth",block:"center"}),(0,b.nr)()&&(0,b.$Y)({event:k.v.TallyFormHightlightFirstError,payload:{offset:n.getBoundingClientRect().top}});return}!1===(0,b.YG)(e)&&e.scrollIntoView({behavior:"smooth",block:"center"}),(0,b.nr)()&&(0,b.$Y)({event:k.v.TallyFormHightlightFirstError,payload:{offset:e.getBoundingClientRect().top}})}},100)},J=function(){return y()("ABCDEFGHIJKLMNPQRSTUVWXYZabcdefghijklmnpqrstuvwxyz123456789".split(""),6).join("")},Z=function(e,t,n,r){var i={},u=!0,a=!1,d=void 0;try{for(var c,p=e[Symbol.iterator]();!(u=(c=p.next()).done);u=!0)!function(){var e=c.value;if(e<n)return i[e]=100;if(e>n)return i[e]=0;var u=[],a=!0,d=!1,p=void 0;try{for(var f,s=r[Symbol.iterator]();!(a=(f=s.next()).done);a=!0){var y=f.value,v=y.type,g=y.groupUuid,m=y.payload;!(!1===o.QD.includes(v)||[o._B.HiddenFields,o._B.CalculatedFields].includes(v))&&m.isRequired&&(u.includes(g)||u.push(g))}}catch(e){d=!0,p=e}finally{try{a||null==s.return||s.return()}finally{if(d)throw p}}if(0===u.length)return i[e]=n<e?0:100;var h=u.length,T=0;u.forEach(function(e){!(0,l.Im)(t[e])&&T++}),i[e]=n<e?0:T/h*100}()}catch(e){a=!0,d=e}finally{try{u||null==p.return||p.return()}finally{if(a)throw d}}return i}},89498:(e,t,n)=>{n.d(t,{BD:()=>B,CM:()=>T,Ff:()=>C,Gb:()=>v,K_:()=>m,Qi:()=>I,Sz:()=>j,T6:()=>d,T8:()=>f,U9:()=>k,VO:()=>x,WY:()=>E,X0:()=>_,XE:()=>G,YR:()=>H,af:()=>c,ah:()=>W,b6:()=>F,bx:()=>y,d0:()=>b,dm:()=>U,fw:()=>w,j7:()=>g,l9:()=>N,lx:()=>S,mA:()=>a,pu:()=>L,q3:()=>h,sQ:()=>R,tP:()=>P,xF:()=>s,z7:()=>M,zN:()=>D});var r=n(72142),i=n(16419),u=n.n(i),o=n(93867),l=n(80428),a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.innerHTML=t,n&&e.focus()},d=function(e){return e.forEach(function(t,n){var r;t.nodeType===Node.ELEMENT_NODE&&(0===t.childNodes.length||(null==(r=t.textContent)?void 0:r.length)===0)&&e.item(n).remove(),t.nodeType===Node.ELEMENT_NODE&&t.childNodes.length>0&&d(t.childNodes)}),e},c=function(e){var t="";return e.forEach(function(e){t+=e.nodeType===Node.TEXT_NODE?e.textContent:e.outerHTML}),t},p=function(e){return Array.from(e.childNodes).filter(function(e){return e.nodeType!==Node.TEXT_NODE||""!==e.textContent})},f=function(e){for(var t=function(e){return p(e)[0]||null},n=t(e);n&&t(n);)n=t(n);return n},s=function(e){for(var t=function(e){return u()(p(e))||null},n=t(e);n&&t(n);)n=t(n);return n},y=function(e){var t,n;return(null==(t=e.nodeType===Node.ELEMENT_NODE?e.closest("[contenteditable]"):null==(n=e.parentElement)?void 0:n.closest("[contenteditable]"))?void 0:t.getAttribute("contenteditable"))==="true"},v=function(e){var t=e.nodeType===Node.ELEMENT_NODE?e:e.parentElement;if(!t)return null;for(var n=t.nextSibling,r=t.previousSibling,i=!0;i;){if(n&&y(n))return n;if(n&&(n=n.nextSibling),r&&y(r))return r;r&&(r=r.previousSibling),n||r||(i=!1)}return null},g=function(e,t){var n,r=document.elementFromPoint(e,t);if(!r)return null;var i=r.childNodes;if(0===i.length)return r;var u=r.querySelector(".content-editable-block");u&&(i=u.childNodes);for(var o=[],l=0;l<i.length;l++){var a=document.createRange();a.selectNode(i[l]);for(var d=a.getClientRects(),c=0;c<d.length;c++){var p=d[c];if(t===p.top&&o.push(i[l]),e>=p.left&&e<=p.right&&t>=p.top&&t<=p.bottom){n=i[l];break}}if(n)break}return!n&&o.length>0?o.pop():n||r},m=function(e,t,n){var r=e.parentElement&&"rtl"===getComputedStyle(e.parentElement).direction,i=!1,u=0;try{for(;!i;){var o=document.createRange();o.setStart(e,u);var a=(0,l.Gr)(o),d=a.x,c=a.y;if(n===c&&(!r&&t<=d||r&&t>=d)){i=!0;continue}u++}}catch(e){u=u>0?u-1:0}return u},h=function(){return"undefined"==typeof document?[]:Array.from(document.querySelectorAll(".content-editable-block"))},T=function(e){return"undefined"==typeof document?null:document.getElementById(e)},_=function(e){var t;return null!=(t=h()[e])?t:null},b=function(e){var t=e-2,n=_(e),r=X(),i=r.findIndex(function(e){return e.dataset.blockUuid===(null==n?void 0:n.id)});if(-1===i){var u=Y(e);if(-1===(i=r.findIndex(function(e){return e.dataset.blockGroupUuid===u})))return t}var o=r[i-2];return o?t=E(o.dataset.blockUuid):t},x=function(e){var t=e+1,n=_(e),r=X(),i=r.findIndex(function(e){return e.dataset.blockUuid===(null==n?void 0:n.id)});if(-1===i){var u=Y(e);if(-1===(i=r.findIndex(function(e){return e.dataset.blockGroupUuid===u})))return t}var o=r[i+1];return o?t=E(o.dataset.blockUuid):t},U=function(e){var t,n;return null!=(n=null==(t=T(e))?void 0:t.innerHTML)?n:""},E=function(e){var t=T(e);return t?h().indexOf(t):-1},B=function(e){var t=_(e);if(!t)return null;var n=t.closest(".tally-block");if(!n)return null;var r=Array.from(n.classList).find(function(e){return -1!==e.indexOf("tally-block-")});return r?q(r):null},k=function(e){if(e.nodeType===Node.ELEMENT_NODE&&"function"==typeof(null==(t=e.className)?void 0:t.indexOf)&&(null==(n=e.className)?void 0:n.indexOf("content-editable-block"))!==-1)return e;var t,n,r,i=e.parentElement;return i?i.nodeType===Node.ELEMENT_NODE&&(null==(r=i.className)?void 0:r.indexOf("content-editable-block"))!==-1?i:i.closest(".content-editable-block"):null},C=function(e){if(!e)return -1;if(e.className&&e.className.indexOf&&-1!==e.className.indexOf("content-editable-block"))return h().indexOf(e);var t=e.closest(".block-container");if(!t)return -1;var n=t.querySelector(".content-editable-block");return n?h().indexOf(n):-1},N=function(){return"undefined"!=typeof document&&document.activeElement&&-1!==document.activeElement.className.indexOf("content-editable-block")?document.activeElement:null},O=function(){if("undefined"==typeof document)return null;var e=document.querySelector(".tally-block:hover");return e?e.querySelector(".content-editable-block"):null},A=function(){var e=N();return e?e.getAttribute("id"):null},I=function(){var e=A();return e?U(e):""},S=function(){var e=N();return e?h().indexOf(e):-1},M=function(){var e=O();return e?h().indexOf(e):-1},R=function(e){var t=N();if(t){var n=(0,l.vn)(),r=n.x,i=n.y;a(t,e);var u=g(r,i);if(u){var o=m(u,r,i);(0,l.f9)(u,o)}}},w=function(e){for(var t=h().splice(0,e).reverse(),n=-1;t.length>0&&n<0;){var r=t.shift();e--,"true"===r.getAttribute("contenteditable")&&"false"===r.dataset.isFolded&&(n=e)}return n},F=function(e){for(var t=h().splice(e+1),n=-1;t.length>0&&n<0;){var r=t.shift();e++,"true"===r.getAttribute("contenteditable")&&"false"===r.dataset.isFolded&&(n=e)}return n},D=function(e){for(var t=h().splice(0,e).reverse(),n=-1;t.length>0&&n<0;){var r=t.shift();e--,"true"===r.dataset.isSelectable&&"false"===r.dataset.isFolded&&(n=e)}return n},L=function(e){for(var t=h().splice(e+1),n=-1;t.length>0&&n<0;){var r=t.shift();e++,"true"===r.dataset.isSelectable&&"false"===r.dataset.isFolded&&(n=e)}return n},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){if(n){if(a(n,e,t.focus),t.focus){var r=n.closest(".block-container");if(!r)return;var i=r.getBoundingClientRect(),u=i.top,o=i.bottom,d=i.height;u>=0&&o<=window.innerHeight-200||window.scrollTo(0,document.documentElement.scrollTop+d)}if(t.cursor){var c=g(t.cursor.x,t.cursor.y);c&&(0,l.f9)(c,m(c,t.cursor.x,t.cursor.y))}}}},H=function(){return function(e){if(e){var t,n;null==(n=e.closest(".block-container"))||null==(t=n.querySelector(".add-container"))||t.click()}}},G=function(e){return function(t){t&&a(t,e)}},j=function(e,t){var n,r=e?T(e):N();if(!r)return{top:0,bottom:0,left:0,right:0};var i=r.closest(".block-container");if(!i)return{top:0,bottom:0,left:0,right:0};var u=null!=(n=i.querySelector(".".concat(t)))?n:i;return{top:u.getBoundingClientRect().bottom+5+(0,o.jK)(),bottom:window.innerHeight-u.getBoundingClientRect().top-(0,o.jK)()+5,left:u.getBoundingClientRect().left+window.pageXOffset,right:window.innerWidth-u.getBoundingClientRect().right-window.pageXOffset}},q=function(e){return e.replace("tally-block-","").replace(/-/g,"_").toUpperCase()},Y=function(e){var t=_(e);if(!t)return null;var n=t.closest(".tally-block");if(!n)return null;var r=Array.from(n.classList).find(function(e){return -1!==e.indexOf("tally-block-group-")});return r?r.replace("tally-block-group-",""):null},W=function(){return null!==document.querySelector(".tally-context-menu-overlay")},X=function(){return Array.from(document.querySelectorAll('.move-dropzone[data-style="block"]')).filter(function(e){return!1===[r._B.MatrixColumn,r._B.MatrixRow].includes(e.dataset.blockType)})}},94234:(e,t,n)=>{n.d(t,{B:()=>f,r:()=>p});var r=n(78191),i=n(99649),u=n(93096),o=n(99490),l=n(72142),a=n(50934),d=n(84580),c=n(75970),p=function(e,t,n){return((null==n?void 0:n.onlySpecificBlockUuids)?t.filter(function(e){var t;return null==(t=n.onlySpecificBlockUuids)?void 0:t.includes(e.uuid)}):t).filter(l.DL).forEach(function(n){var r=n.groupUuid;n.payload.calculatedFields.forEach(function(n){void 0!==n.value&&(void 0===e[r]&&(e[r]={}),e[r][n.uuid]=(0,d.Ry)(n.value,n.type,e,t))})}),e},f=function(e,t,n,f){if(0===f.filter(function(e){return e.type===l._B.CalculatedFields}).length||(e=p(e,f),0===f.filter(function(e){return e.type===l._B.ConditionalLogic}).length))return e;var s=!0,y=!1,v=void 0;try{for(var g,m=t[Symbol.iterator]();!(s=(g=m.next()).done);s=!0){var h=(null!=(x=n[g.value-1])?x:[]).filter(function(e){return[l._B.CalculatedFields,l._B.ConditionalLogic].includes(e.type)}),T=!0,_=!1,b=void 0;try{for(var x,U,E=h[Symbol.iterator]();!(T=(U=E.next()).done);T=!0){var B=U.value;if(B.type===l._B.CalculatedFields&&(e=p(e,f,{onlySpecificBlockUuids:[B.uuid]})),(0,l.CA)(B)){var k=B.payload,C=k.logicalOperator,N=k.conditionals,O=k.actions;if((0,c.ZJ)(N,C,e,f)){var A=!0,I=!1,S=void 0;try{for(var M,R=O[Symbol.iterator]();!(A=(M=R.next()).done);A=!0){var w,F,D,L,P,H,G=M.value;if(G.type===l.JI.Calculate&&(null==(F=G.payload)||null==(w=F.calculate)?void 0:w.field)&&(null==(L=G.payload)||null==(D=L.calculate)?void 0:D.operator)&&void 0!==(null==(H=G.payload)||null==(P=H.calculate)?void 0:P.value)){var j=(0,d.Wc)(e,G.payload.calculate.field),q=(0,d.Ry)(G.payload.calculate.value,G.payload.calculate.field.calculatedFieldType,e,f);switch(G.payload.calculate.field.calculatedFieldType===l.ZH.Number&&(j=new a.g(j),q=new a.g(q)),G.payload.calculate.operator){case l.Fi.Addition:(void 0===j?"undefined":(0,o._)(j))==="object"?j=j.plus(q):j+=q;break;case l.Fi.Subtraction:j=j.minus(q);break;case l.Fi.Multiplication:j=j.multipliedBy(q);break;case l.Fi.Division:j=j.dividedBy(q);break;case l.Fi.Assignment:j=q}G.payload.calculate.field.calculatedFieldType===l.ZH.Number&&(j=j.toNumber()),e=(0,u._)((0,i._)({},e),(0,r._)({},G.payload.calculate.field.blockGroupUuid,(0,u._)((0,i._)({},e[G.payload.calculate.field.blockGroupUuid]),(0,r._)({},G.payload.calculate.field.uuid,j))))}}}catch(e){I=!0,S=e}finally{try{A||null==R.return||R.return()}finally{if(I)throw S}}}}}}catch(e){_=!0,b=e}finally{try{T||null==E.return||E.return()}finally{if(_)throw b}}}}catch(e){y=!0,v=e}finally{try{s||null==m.return||m.return()}finally{if(y)throw v}}return e}},97279:(e,t,n)=>{n.d(t,{Dl:()=>v,Jb:()=>p,NT:()=>s,bW:()=>f,fc:()=>g,ww:()=>y,yL:()=>m});var r=n(83242),i=n(72142),u=n(36102),o=n.n(u),l=n(36002),a=n(36526),d=n(3656),c=n(70259),p=function(){return{uuid:(0,l.A)()}},f=function(){return{uuid:(0,l.A)()}},s=function(){return{uuid:"allAnswers",type:i.PU.Placeholder,questionType:i._B.FormTitle,blockGroupUuid:"allAnswers",title:"allAnswers"}},y=function(e,t){var n=[],u=[],l=(0,r._)(e);return(null==t?void 0:t.beforeBlockUuid)&&(e=(0,a.Vz)(e,t.beforeBlockUuid,null==t?void 0:t.alwaysIncludeBlockTypes)),(null==t?void 0:t.filterOutBlockTypes)&&t.filterOutBlockTypes.length>0&&(e=e.filter(function(e){var n=e.type;return!1===t.filterOutBlockTypes.includes(n)})),(null==t?void 0:t.includeUtility)===i.H_.Date&&n.push({uuid:i.K0.Today,type:i.PU.Utility,questionType:i._B.InputDate,blockGroupUuid:i.K0.Today,title:i.K0.Today,payload:{days:0}}),(null==t?void 0:t.includeMetadata)?(n.push({uuid:"id",type:i.PU.Metadata,questionType:i._B.FormTitle,blockGroupUuid:"id",title:"id"}),n.push({uuid:"respondentId",type:i.PU.Metadata,questionType:i._B.FormTitle,blockGroupUuid:"respondentId",title:"respondentId"}),n.push({uuid:"formName",type:i.PU.Metadata,questionType:i._B.FormTitle,blockGroupUuid:"formName",title:"formName"})):(null==t?void 0:t.includeRespondentMetadata)&&(n.push({uuid:"ipAddress",type:i.PU.Metadata,questionType:i._B.FormTitle,blockGroupUuid:"ipAddress",title:"ipAddress"}),n.push({uuid:"respondentId",type:i.PU.Metadata,questionType:i._B.FormTitle,blockGroupUuid:"respondentId",title:"respondentId"})),(null==t?void 0:t.includePlaceholders)&&n.push(s()),e.forEach(function(r){if(!u.includes(r.groupUuid)){if(r.type===i._B.CalculatedFields)r.payload.calculatedFields.filter(function(e){return e.name&&e.type}).forEach(function(e){n.push({uuid:e.uuid,type:i.PU.CalculatedField,questionType:i._B.CalculatedFields,blockGroupUuid:r.groupUuid,title:e.name||"",calculatedFieldType:e.type})});else if((0,i.bt)(r))r.payload.hiddenFields.forEach(function(e){n.push({uuid:e.uuid,type:i.PU.HiddenField,questionType:i._B.HiddenFields,blockGroupUuid:r.groupUuid,title:e.name||""})});else if(r.type!==i._B.Matrix||(null==t?void 0:t.combineMatrix)){var a=(0,d.jT)(r,l);a&&n.push({uuid:a.blockGroupUuid,type:i.PU.InputField,questionType:a.type,blockGroupUuid:a.blockGroupUuid,title:o().decode(a.title||"")})}else{var p=e.filter(function(e){return e.groupUuid===r.groupUuid&&e.type===i._B.MatrixRow}),f=(0,d.jT)(r,l);p.forEach(function(e){var t=(0,c.Q)(e.uuid,l);f&&f.title&&f.title!==i.pr[i._B.Matrix]&&(t="".concat(f.title," [").concat(t,"]")),n.push({uuid:e.uuid,type:i.PU.InputField,questionType:i._B.Matrix,blockGroupUuid:e.groupUuid,title:t})})}u.push(r.groupUuid)}}),n},v=function(e,t){var n=e.title;return e.type===i.PU.Metadata?n=t("form-builder.mention-menu.metadata.".concat(e.uuid)):e.type===i.PU.Placeholder&&(n=t("form-builder.mention-menu.placeholder.".concat(e.uuid))),e.type===i.PU.Utility&&e.uuid===i.K0.Today&&(n=t("label.today")),n},g=function(e,t,n){var r=!1,u=!0,o=!1,l=void 0;try{for(var a,d,c=(null!=(a=e.conditionals)?a:[])[Symbol.iterator]();!(u=(d=c.next()).done);u=!0){var p,f,s,y,v,m=d.value;if((null==(f=m.payload)||null==(p=f.field)?void 0:p.blockGroupUuid)&&n.includes(m.payload.field.blockGroupUuid)||(null==(y=m.payload)||null==(s=y.value)?void 0:s.blockGroupUuid)&&n.includes(m.payload.value.blockGroupUuid)||m.type===i.RZ.Group&&(null==(v=m.payload)?void 0:v.conditionals)&&(r=g(m.payload,t,n)))return!0}}catch(e){o=!0,l=e}finally{try{u||null==c.return||c.return()}finally{if(o)throw l}}var h=!0,T=!1,_=void 0;try{for(var b,x,U=(null!=(b=e.actions)?b:[])[Symbol.iterator]();!(h=(x=U.next()).done);h=!0){var E,B,k,C,N,O,A,I,S,M,R,w=x.value;if((null==(E=w.payload)?void 0:E.requireAnswer)&&n.includes(w.payload.requireAnswer))return!0;if((null==(C=w.payload)||null==(k=C.calculate)||null==(B=k.field)?void 0:B.blockGroupUuid)&&n.includes(w.payload.calculate.field.blockGroupUuid))return!0;if((null==(A=w.payload)||null==(O=A.calculate)||null==(N=O.value)?void 0:N.blockGroupUuid)&&n.includes(w.payload.calculate.value.blockGroupUuid))return!0;else if((null==(I=w.payload)?void 0:I.showBlocks)&&w.payload.showBlocks.some(function(e){return e===t.uuid}))return!0;else if((null==(S=w.payload)?void 0:S.hideBlocks)&&w.payload.hideBlocks.some(function(e){return e===t.uuid}))return!0;else if((null==(M=w.payload)?void 0:M.jumpToPage)===t.uuid||(null==(R=w.payload)?void 0:R.jumpToPage)&&t.type===i._B.PageBreak)return!0}}catch(e){T=!0,_=e}finally{try{h||null==U.return||U.return()}finally{if(T)throw _}}return r},m=function(e,t){var n=!0,r=!1,i=void 0;try{for(var u,o=e.calculatedFields[Symbol.iterator]();!(n=(u=o.next()).done);n=!0){var l,a=u.value;if((null==(l=a.value)?void 0:l.blockGroupUuid)&&t.includes(a.value.blockGroupUuid))return!0}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!1}}}]);