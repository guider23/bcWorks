try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="dfeac58c-6686-4b4c-8399-66973f7d0ec6",e._sentryDebugIdIdentifier="sentry-dbid-dfeac58c-6686-4b4c-8399-66973f7d0ec6")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:so.tally.main-application":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64520,79438],{11083:(e,n,t)=>{t.d(n,{A:()=>r});var r=(0,t(58309).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},12870:(e,n,t)=>{t.d(n,{o:()=>l});var r=t(70376),o=t(55729),i=t(29733),l=function(){var e=(0,i.Bd)().t;return(0,o.useMemo)(function(){return(0,r.X6)(e)},[e("json.countries")])}},64520:(e,n,t)=>{t.r(n),t.d(n,{formatPhoneNumber:()=>a,getMaskForPhoneNumber:()=>i,getPhoneNumber:()=>u,getRemainingMaskForPhoneNumber:()=>l,isPhoneNumberValid:()=>c});var r=t(64758),o=t(66096),i=function(e,n){var t=(e.length<3?"+## ### ## ## ##":"+### ## ### ###").replace(/#/g,"_");if(n||(n=(0,o.R7)(e)),n)try{var i=(0,r.lq)(e,{regionCode:n}).type;i&&"unknown"!==i||(i="mobile"),t=(0,r.rI)(n,i).number.international.replace(/[0-9]/g,"_")}catch(e){}return n?t:"+###".replace(/#/g,"_")},l=function(e,n){return i(e,n).substring(e.length)},a=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=i(e,n),r=e.replace(/[^0-9]/g,""),o="",l=0,a=0;a<t.length;a++)if("_"===t[a]){if(o+=r[l]||"",++l>=r.length)break}else o+=t[a];return l<r.length&&(o+=r.substring(l)),o},u=function(e){var n,t,i=e.replace(/[^0-9]/g,"");if(0===i.length)return"";var l="+".concat(i),a=(0,o.R7)(e);if(!a)return l;try{return null!=(t=null==(n=(0,r.lq)(e,{regionCode:a}).number)?void 0:n.e164)?t:l}catch(e){return l}},c=function(e){if(0===e.replace(/[^0-9]/g,"").length)return!1;var n=(0,o.wb)(e);if(0===n.length)return!1;var t=!1;try{var i=!0,l=!1,a=void 0;try{for(var u,c=n[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var s=u.value;if((0,r.lq)(e,{regionCode:s}).valid){t=!0;break}}}catch(e){l=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(l)throw a}}}catch(e){}return t}},73881:(e,n,t)=>{t.d(n,{QJ:()=>l,bR:()=>a,yH:()=>i});var r=t(46355),o="PHONE_NUMBER_INPUT",i=function(e,n,t){try{var i={},l=r.D.get(o);l&&(i=JSON.parse(l)),i.keys||(i.keys={}),i.lastCountryCode=t||i.lastCountryCode||null,n||t?i.keys[e]={value:n,countryCode:t}:delete i.keys[e],localStorage.setItem(o,JSON.stringify(i))}catch(e){}},l=function(e,n,t){try{var i={},l=r.D.get(o);if(l){if(i=JSON.parse(l),!n&&!t&&i.lastCountryCode)return i.lastCountryCode;if(i.keys&&i.keys[e]&&n===i.keys[e].value&&i.keys[e].countryCode)return i.keys[e].countryCode}}catch(e){}return null},a=function(e){try{var n=r.D.get(o);if(!n)return;var t=JSON.parse(n);if(!t.keys)return;var i=!1,l=!0,a=!1,u=void 0;try{for(var c,s=e[Symbol.iterator]();!(l=(c=s.next()).done);l=!0){var d=c.value;t.keys[d]&&(delete t.keys[d],i=!0)}}catch(e){a=!0,u=e}finally{try{l||null==s.return||s.return()}finally{if(a)throw u}}0===Object.keys(t.keys).length&&(delete t.keys,i=!0),i&&localStorage.setItem(o,JSON.stringify(t))}catch(e){}}},79438:(e,n,t)=>{t.r(n),t.d(n,{default:()=>I});var r=t(6029),o=t(79493),i=t(99649),l=t(93096),a=t(67143),u=t(83242),c=t(81583),s=t(11083),d=t(55729),f=t(29733),h=t(94145),p=t(43857),g=t(12870),y=t(81719),v=t(50499),m=t(64520),b=t(66096),x=t(73881),w=t(54791),C=h.Ay.div.withConfig({componentId:"sc-184168b3-0"})(["position:absolute;top:0;padding:0 ","px;display:flex;align-items:center;justify-content:flex-end;height:100%;cursor:pointer;border:0;border-radius:","px;"," "," > svg{"," pointer-events:none;color:",";}> div{font-size:13px;color:",";}@media (hover:hover){&:hover{> div{color:",";}}}"],function(e){return e.theme.form.inputHorizontalPadding-4},function(e){return e.theme.form.inputBorderRadius},function(e){var n=e.theme;return(0,w.i7)("right","0",n.direction)},function(e){return"rtl"===e.theme.direction&&"flex-direction: row-reverse;"},function(e){var n=e.theme;return(0,w.i7)("margin-left","6px",n.direction)},function(e){return e.theme.color.textGrayscale3},function(e){return e.theme.color.textGrayscale2},function(e){return e.theme.color.textGrayscale1}),k=h.Ay.div.withConfig({componentId:"sc-184168b3-1"})(["position:relative;direction:ltr;.tally-context-menu{width:100%;max-height:400px;}"," ",""],function(e){var n=e.theme;return!1===e.hasCountryCode&&"\n    input {\n      ".concat((0,w.i7)("padding-right","".concat(83+n.form.inputHorizontalPadding-4,"px"),n.direction),";\n      ").concat("rtl"===n.direction&&"text-align: right;",";\n    }\n\n    ").concat(C," {\n      background-color: transparent;\n    }\n  ")},function(e){var n=e.hasCountryCode,t=e.theme;return!0===n&&"\n    input {\n      ".concat((0,w.i7)("padding-right","".concat(54+t.form.inputHorizontalPadding-4,"px"),t.direction),";\n      ").concat("rtl"===t.direction&&"text-align: right;",";\n    }\n  ")}),S=h.Ay.div.withConfig({componentId:"sc-184168b3-2"})(["position:absolute;top:0;pointer-events:none;background-color:transparent;display:flex;align-items:center;width:100%;height:100%;padding:0 ","px;color:",";span:nth-child(1){color:transparent;}span:nth-child(2){font-size:19px;}",""],function(e){return e.theme.form.inputHorizontalPadding},function(e){return e.theme.color.inputPlaceholder},function(e){return"rtl"===e.theme.direction&&"display: none;"}),_=h.Ay.div.withConfig({componentId:"sc-184168b3-3"})(["color:",";padding-left:",";"],function(e){return e.theme.color.textGrayscale2},function(e){return e.theme.spacing.sm}),A=function(e){return e.Manual="MANUAL",e.Auto="AUTO",e}(A||{});let N=function(e){var n,t=e.defaultValue,w=e.defaultCountryCode,A=e.inputProps,N=e.onChange,j=(0,f.Bd)().t,T=(0,h.DP)(),I=(0,d.useRef)(null),M=(0,a._)((0,d.useState)(null!=t?t:""),2),P=M[0],O=M[1],D=(0,a._)((0,d.useState)(t?(0,m.formatPhoneNumber)(t):""),2),R=D[0],B=D[1],U=(0,a._)((0,d.useState)(null!=w?w:null),2),q=U[0],z=U[1],E=(0,a._)((0,d.useState)({showMask:!1,showSelectButton:!!t,selectTrigger:null}),2),H=E[0],F=E[1],G=(0,d.useRef)(!0),J=(0,d.useRef)(!0),K=(0,d.useRef)(""),L=(0,d.useRef)(!1),Q=(0,d.useRef)(null),V=function(){var e=(null==A?void 0:A.id)?(0,x.QJ)(A.id,t,w):null;if(e)return z(e),e;if(!t)return z(null!=w?w:null),null!=w?w:null;var n=(0,b.R7)(t);return z(n),n},W=(0,g.o)(),$=(0,d.useMemo)(function(){var e=[];for(var n in W)e.push({code:n,country:W[n],callingCode:b.Tc[n]});return e.sort(function(e,n){return e.country.localeCompare(n.country)})},[W]),X=function(e){if(""===e||"+"===e)return[];var n=$.filter(function(n){return n.callingCode.startsWith(e)}).sort(function(e,n){return e.callingCode>n.callingCode?1:-1});return(0,b.Qh)(n,e)},Y=function(e){if(""===e||"+"===e)return[];var n=(0,b.wb)(P);if(0===n.length)return[];var t=$.filter(function(e){return n.includes(e.code)}).sort(function(e,n){return e.callingCode>n.callingCode?1:-1});return(0,b.Qh)(t,e)},Z=(0,d.useMemo)(function(){var e=[],n=[],t=[],r=X(P);if(n=r,0===r.length||"MANUAL"===H.selectTrigger){var o=[];0===r.length&&(o=Y(P)),n=(0,u._)(r).concat((0,u._)(o)),t=$.filter(function(e){return!(0,u._)(r.map(function(e){return e.code})).concat((0,u._)(o.map(function(e){return e.code}))).includes(e.code)})}return n.length>0&&e.push({options:n}),t.length>0&&e.push({options:t}),e},[P,H]),ee=function(e){return e&&b.Tc[e]?b.Tc[e]:"+"},en=function(e){0!==Object.keys(e).length&&F((0,i._)({},H,e))},et=function(e,n,t){if(L.current=!1,""!==e&&!1===e.startsWith("+")&&e.length>1)if(q){var r,o=b.Tc[q];o&&(e=e.startsWith(o.substring(1))?"+".concat(e):"".concat(null!=(r=b.Tc[q])?r:"").concat(e))}else L.current=!0;/[٠-٩]/.test(e)&&(e=e.replace(/[٠-٩]/g,function(e){return"٠١٢٣٤٥٦٧٨٩".indexOf(e).toString()}));var i=(0,b.R7)(e);i?!n&&i||n&&i&&n!==i&&b.Tc[n]!==b.Tc[i]?(z(i),n=i):n!==q&&z(n):(z(null),n=null);var l=(0,m.formatPhoneNumber)(e,n);if(t){var a=t.selectionStart||0,u=null;e!==l&&e.length!==a&&(0===a?u=1:e.slice(0,a)===l.slice(0,a)?u="Delete"===K.current&&isNaN(parseFloat(l.charAt(a)))?a+1:a:e.charAt(a-1)!==l.charAt(a-1)&&(isNaN(parseFloat(K.current))?u=a:isNaN(parseFloat(l.charAt(a-1)))&&(u=a+1))),null!==u&&window.requestAnimationFrame(function(){t.selectionStart=u,t.selectionEnd=u})}e=(0,m.getPhoneNumber)(l),B(l),O(e),N(e),(null==A?void 0:A.id)&&(0,x.yH)(A.id,e,n);var c=X(e);!el&&n&&c.length>1&&(ec(!0),en({selectTrigger:"AUTO"})),el&&"AUTO"===H.selectTrigger&&(!n||0===c.length)&&ec(!1)},er=function(e){var n;b.Tc[e]&&(L.current?(et("".concat(b.Tc[e]).concat(P.replace("+","")),e),L.current=!1):q&&b.Tc[q]&&P.length>b.Tc[e].length?et(P.replace(b.Tc[q],b.Tc[e]),e):!q&&P.length>b.Tc[e].length?et("".concat(b.Tc[e]).concat(P.replace("+","")),e):et(b.Tc[e],e),ec(!1),null==(n=I.current)||n.focus())};(0,d.useEffect)(function(){var e=null;G.current&&(G.current=!1,e=V(),t&&e&&en({showSelectButton:!0})),t!==P&&(O(null!=t?t:""),B(t?(0,m.formatPhoneNumber)(t):""),e=V()),t&&e&&!H.showSelectButton&&en({showSelectButton:!0})},[t]);var eo=(n=[]).concat.apply(n,(0,u._)(Z.map(function(e){return e.options}))),ei=(0,y.f)({optionsSize:eo.length-1,onSelection:function(e){er(eo[e].code)}}),el=ei.isSelectOpen,ea=ei.onKeyDown,eu=ei.selectedIndex,ec=ei.toggleSelectionMenu;return(0,d.useEffect)(function(){if(null!==eu){var e;(0,v.cR)(null==(e=Q.current)?void 0:e.parentElement,eo[eu].code)}},[eu]),(0,r.jsxs)(k,{hasCountryCode:!!q,"data-sentry-element":"Container","data-sentry-component":"InputPhoneNumber","data-sentry-source-file":"index.tsx",children:[(0,r.jsx)(o.A,(0,l._)((0,i._)({},A),{ref:I,type:"tel",value:R,onFocus:function(){var e=null;J.current&&(J.current=!1,e=V()),el||(H.showMask||en({showMask:!0,showSelectButton:!0}),""===R&&setTimeout(function(){return B(ee(null!=e?e:q))},10))},onBlur:function(){if(!el){var e={};H.showMask&&(e.showMask=!1),("+"===R||R===ee(q))&&(B(""),""!==P&&(O(""),N("")),e.showSelectButton=!1),en(e)}},onKeyDown:ea,onChange:function(e){return et(e.target.value,q,e.target)},"data-sentry-element":"Input","data-sentry-source-file":"index.tsx"})),H.showMask&&(0,r.jsxs)(S,{children:[(0,r.jsx)("span",{children:R}),(0,r.jsx)("span",{children:(0,m.getRemainingMaskForPhoneNumber)(R,q)})]}),H.showSelectButton&&(0,r.jsxs)(C,{onMouseDown:function(e){return e.preventDefault()},onClick:function(){ec(!0),en({selectTrigger:"MANUAL"})},children:[q?(0,r.jsx)(c.l,{country:(0,b.qw)(q)}):(0,r.jsx)("div",{children:j("label.country")}),(0,r.jsx)(s.A,{size:16})]}),el&&(0,r.jsx)(p.Ay,{position:{top:T.form.inputHeight+4,left:0,bottom:T.form.inputHeight+4,right:0},width:"auto",onClose:function(){var e;ec(!1),null==(e=I.current)||e.focus()},children:(0,r.jsx)(p.B8,{ref:Q,withSectionDivider:!0,children:Z.map(function(e,n){var t=e.options;return(0,r.jsx)(p.wn,{children:t.map(function(e){var n=e.code,t=e.callingCode,o=e.country,i=["list-item"];return null!==eu&&n===eo[eu].code&&i.push("selected"),(0,r.jsx)(p.q7,{id:n,className:i.join(" "),label:o,actionContent:(0,r.jsx)(_,{children:t}),onClick:function(){return er(n)}},n)})},"group_".concat(n))})})})]})};var j=t(12061),T=t(9744);let I=function(e){var n,t,i=e.value,l=void 0===i?"":i,a=e.placeholder,u=void 0===a?"":a,c=e.isRequired,s=e.internationalFormat,d=e.defaultCountryCode,f=e.error,h=e.question,p=e.language,g=e.onChange,y=e.renderRequiredIndicator,v=f?"error_".concat(null==h?void 0:h.blockGroupUuid):void 0;return s?(0,r.jsx)(T.m,{"data-sentry-element":"Container","data-sentry-component":"InputPhoneNumberBlock","data-sentry-source-file":"phone-number.tsx",children:(0,r.jsxs)(T.U,{"data-sentry-element":"Content","data-sentry-source-file":"phone-number.tsx",children:[(0,r.jsx)(N,{defaultValue:l,defaultCountryCode:d,language:p,inputProps:{id:null==h?void 0:h.blockGroupUuid,placeholder:u,required:c,autoComplete:"tel","aria-label":null!=(t=null==h?void 0:h.title)?t:void 0,"aria-required":c?"true":"false","aria-invalid":f?"true":"false","aria-describedby":v},onChange:function(e){return null==g?void 0:g(e)},"data-sentry-element":"InputPhoneNumber","data-sentry-source-file":"phone-number.tsx"}),y&&y(),f&&(0,r.jsx)(j.A,{id:v,error:f})]})}):(0,r.jsx)(T.m,{children:(0,r.jsxs)(T.U,{children:[(0,r.jsx)(o.A,{id:null==h?void 0:h.blockGroupUuid,type:"tel",value:l,placeholder:u,required:c,autoComplete:"tel","aria-label":null!=(n=null==h?void 0:h.title)?n:void 0,"aria-required":c?"true":"false","aria-invalid":f?"true":"false","aria-describedby":v,onChange:function(e){return null==g?void 0:g(e.target.value)}}),y&&y(),f&&(0,r.jsx)(j.A,{id:v,error:f})]})})}},81583:(e,n,t)=>{t.d(n,{l:()=>s});var r=t(99649),o=t(93096),i=t(92424),l=t(6029),a=t(94145),u=a.Ay.span.withConfig({componentId:"sc-ed244a1-0"})(["display:inline-flex;align-items:center;justify-content:center;line-height:1;"]),c=a.Ay.img.withConfig({componentId:"sc-ed244a1-1"})(["vertical-align:middle;aspect-ratio:4/3;object-fit:cover;outline:0.5px solid rgba(0,0,0,0.1);outline-offset:-0.5px;",""],function(e){var n=e.$size;return"auto"===n?(0,a.AH)(["height:0.85em;"]):(0,a.AH)(["width:","px;"],n)}),s=function(e){var n=e.country,t=e.size,a=(0,i._)(e,["country","size"]);return(0,l.jsx)(u,(0,o._)((0,r._)({className:"flag"},a),{"data-sentry-element":"Container","data-sentry-component":"Flag","data-sentry-source-file":"index.tsx",children:(0,l.jsx)(c,{$size:void 0===t?"auto":t,src:"https://flagicons.lipis.dev/flags/4x3/".concat(n.toLowerCase(),".svg"),alt:"".concat(n," flag"),"data-sentry-element":"Image","data-sentry-source-file":"index.tsx"})}))}},81719:(e,n,t)=>{t.d(n,{f:()=>l});var r=t(99649),o=t(67143),i=t(55729),l=function(e){var n=e.optionsSize,t=e.onSelection,l=(0,i.useRef)(""),a=(0,o._)((0,i.useState)({isSelectOpen:!1,selectedIndex:null}),2),u=a[0],c=a[1],s=u.isSelectOpen,d=u.selectedIndex,f=function(){null!==d&&(t(d),h({isSelectOpen:!1}))},h=function(e){0!==Object.keys(e).length&&(void 0===e.isSelectOpen||e.isSelectOpen||(e.selectedIndex=null),c((0,r._)({},u,e)))};return{toggleSelectionMenu:function(e){h({isSelectOpen:e})},onKeyDown:function(e){if(l.current=e.key,s&&"Tab"===e.key)return void h({isSelectOpen:!1});if(s)switch(e.key){case"ArrowDown":case"ArrowUp":e.preventDefault();var t=null!=d?d:-1;"ArrowDown"===e.key?++t>n&&(t=0):"ArrowUp"===e.key&&--t<0&&(t=n),h({selectedIndex:t});break;case"Enter":e.preventDefault(),f();break;case" ":d&&(e.preventDefault(),f());break;case"Backspace":case"Delete":d&&h({selectedIndex:null})}},isSelectOpen:s,selectedIndex:d}}}}]);